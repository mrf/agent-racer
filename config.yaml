server:
  port: 8080
  host: "127.0.0.1"
  # Restrict browser origins that can open WebSocket connections.
  # When configured, requests with missing Origin headers are rejected and
  # only listed origins are accepted (localhost has no special treatment).
  # When omitted, localhost/loopback origins are accepted (dev-only).
  # allowed_origins:
  #   - "http://localhost:8080"
  #   - "http://127.0.0.1:8080"
  # Optional: require an auth token for API/WS access
  # auth_token: ""

sources:
  claude: true
  codex: true # Set to true to enable Codex (OpenAI) session monitoring
  gemini: true # Set to true to enable Gemini CLI session monitoring

monitor:
  poll_interval: 1s
  snapshot_interval: 5s
  broadcast_throttle: 100ms
  session_stale_after: 2m
  completion_remove_after: 90s
  # Optional override for Claude SessionEnd hook markers
  # session_end_dir: "/home/user/.local/state/agent-racer/session-end"
  # CPU threshold (%) for detecting active processing (churning state)
  churning_cpu_threshold: 15.0
  # If true, only consider churning when both CPU and TCP connections are active
  churning_requires_network: false

models:
  # Keys ending with * are prefix patterns (longest match wins).
  # Exact names still work and take priority over prefixes.
  #
  # Claude models (all current variants use 200K)
  claude-*: 200000
  # Codex (OpenAI) — fallbacks; Codex reports context window dynamically
  gpt-*-codex: 272000
  codex-*: 200000
  o4-*: 200000
  o3: 200000
  gpt-4.1: 1047576
  # Gemini models — prefix patterns replace the old hardcoded Go switch
  gemini-2.5-*: 1048576
  gemini-2.0-*: 1048576
  gemini-3-*: 1000000
  gemini-1.5-pro*: 2097152
  gemini-1.5-flash*: 1048576
  default: 200000

# Gamification settings
# gamification:
#   battle_pass:
#     enabled: false
#     season: "2025-07"  # Change to rotate seasons (archives old stats, resets XP + tier)
