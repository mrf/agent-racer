{"id":"agent-racer-06d","title":"Tests: rewards + equip","description":"Test reward registry: all rewards registered, each linked to valid achievement ID. Test equip: equip unlocked reward succeeds, equip locked reward fails, only one item per slot, equip persists to stats.json. Test API: POST /api/equip returns updated loadout, invalid slot/reward returns error. Files: backend/internal/gamification/rewards_test.go","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-18T16:35:43.027243696-08:00","created_by":"Mark Ferree","updated_at":"2026-02-22T13:14:31.2176952-08:00","closed_at":"2026-02-22T13:14:31.2176952-08:00","close_reason":"Merged to main","dependencies":[{"issue_id":"agent-racer-06d","depends_on_id":"agent-racer-07y","type":"blocks","created_at":"2026-02-18T16:35:47.104439839-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-07y","title":"Reward registry + equip state (gamification/rewards.go)","description":"Registry of all cosmetic rewards: ID, Type (paint/trail/body/badge/sound/theme/title), Name, UnlockedBy (achievement ID). Equip state: one slot per type, persisted in stats.json 'equipped' field. Equip(slot, rewardID) validates reward is unlocked before equipping. GetEquipped() returns current loadout. Files: backend/internal/gamification/rewards.go","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-18T16:34:21.592005658-08:00","created_by":"Mark Ferree","updated_at":"2026-02-20T19:06:33.018707837-08:00","closed_at":"2026-02-20T19:06:33.018707837-08:00","close_reason":"Closed","dependencies":[{"issue_id":"agent-racer-07y","depends_on_id":"agent-racer-mi3","type":"blocks","created_at":"2026-02-18T16:34:26.351009623-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-0bv","title":"Skip dead sessions on startup and use real timestamps for stale detection","description":"On server restart, dead session JSONL files were parsed from offset 0 with lastDataTime=now, making them appear active for 2 minutes before stale detection kicked in. Two fixes: (1) Use update.LastTime instead of now for lastDataTime when available, (2) Skip creating sessions entirely when their last data timestamp exceeds session_stale_after on initial discovery.","status":"closed","priority":0,"issue_type":"bug","owner":"markferree@gmail.com","created_at":"2026-02-05T19:51:48.178319331-08:00","created_by":"Mark Ferree","updated_at":"2026-02-05T19:53:22.586023912-08:00","closed_at":"2026-02-05T19:53:22.586023912-08:00","close_reason":"Committed on main - uses real timestamps for lastDataTime and skips dead sessions on initial discovery"}
{"id":"agent-racer-0lg","title":"Cars stay in pit during active Claude CLI interaction","description":"ROOT CAUSE: Process detection uses Linux /proc filesystem which doesn't exist on macOS. DiscoverProcessActivity() silently fails, isChurning is always false, idle sessions always go to pit.\n\n**Fix needed:** Implement macOS-specific process detection using either:\n1. ps command parsing (simple but slower)\n2. sysctl calls (faster, native)\n3. gopsutil library (cross-platform)\n\nFiles affected:\n- backend/internal/monitor/process.go - add build tag //go:build linux\n- backend/internal/monitor/process_darwin.go - new file with macOS implementation\n\nSee docs/parking-lot.md for context on pit vs track classification.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-02-04T15:17:00.539816-08:00","created_by":"mark.ferree","updated_at":"2026-02-04T15:20:13.103472-08:00","closed_at":"2026-02-04T15:20:13.103472-08:00","close_reason":"Root cause identified: Linux-only /proc usage. Solution: use gopsutil for cross-platform process detection."}
{"id":"agent-racer-0xo","title":"White flag with black text and attach flagpole to car body","description":"Two fixes for the session name flag on cars: 1) Make all flags white background with black text regardless of car color, for consistent readability. 2) The flagpole is currently floating above the trunk -- attach it so it visually connects to the car body (roof or rear) without a gap.","status":"closed","priority":2,"issue_type":"bug","owner":"markferree@gmail.com","created_at":"2026-02-04T17:42:24.25426389-08:00","created_by":"Mark Ferree","updated_at":"2026-02-04T17:46:20.236120171-08:00","closed_at":"2026-02-04T17:46:20.236120171-08:00","close_reason":"Flags now white with black text, flagpole attached to car body"}
{"id":"agent-racer-11b","title":"Prefix-match model context windows in config","description":"Context window resolution is inconsistent across sources and requires exact model names in config.yaml. New model variants (date suffixes, preview tags) silently fall back to the 200k default. The frontend also hardcodes 200K and draws a single shared finish line regardless of per-session context windows.\n\n## Part 1: Backend — Prefix matching for model context windows\n\n### Current state\n- Claude: no dynamic reporting, exact model name lookup in config\n- Codex: dynamic reporting from events (works well), exact fallback\n- Gemini: hardcoded Go switch (geminiContextWindow()) + exact config fallback\n- config.yaml has ~15 exact entries that grow with every model release\n\n### Proposed: prefix matching + delete hardcoded switch\n\nResolution chain (first match wins):\n1. Source-reported (update.MaxContextTokens) — Codex already does this\n2. Exact model name in config\n3. Longest prefix match in config (NEW)\n4. Global default in config\n5. Hardcoded 200000\n\nConfig entries ending with * become prefix patterns, longest wins:\n  claude-*: 200000\n  gemini-2.5-*: 1048576\n  gemini-2.0-*: 1048576\n  gemini-3-*: 1000000\n  gemini-1.5-pro*: 2097152\n  gemini-1.5-flash*: 1048576\n  gpt-4.1: 1047576  (exact override still works)\n  default: 200000\n\nCollapses ~15 entries to ~8, auto-covers future model variants.\n\n### Files to change\n- backend/internal/config/config.go — MaxContextTokens() tries exact then longest-prefix\n- backend/internal/monitor/gemini_source.go — delete geminiContextWindow(), rely on config\n- config.yaml + config.example.yaml — convert to prefix patterns\n- Add tests for prefix matching logic\n\n---\n\n## Part 2: Frontend — Per-model finish lines (absolute token scale)\n\n### Current state\n- RaceCanvas.js:387 passes hardcoded 200000 to Track.draw()\n- Track draws ONE shared finish line at bounds.x + bounds.width\n- Car X position = contextUtilization (0–1), hiding real scale differences\n- Token markers are fixed at 50K/100K/150K\n\n### Proposed: absolute token scale with per-lane finish lines\n\nSwitch X-axis from utilization (0–1) to absolute tokens (0 to globalMax):\n- globalMaxTokens = max of all active sessions' maxContextTokens\n- Car X position = tokensUsed / globalMaxTokens (NOT contextUtilization)\n- Each lane gets its own finish line at carMaxTokens / globalMaxTokens\n- A 200K session at capacity appears at 20% of track width when a 1M session is racing\n- Token markers scale dynamically to globalMaxTokens\n\nThis makes context window differences immediately visible — you can SEE that a Gemini session has 5x the runway of a Claude session.\n\n### Changes required\n\n**Track.js:**\n- draw() receives per-lane maxTokens array (or a globalMax + per-session max), not a single global\n- _drawFinishLine() → _drawLaneFinishLines() — draw per-lane finish markers at different X positions\n- _drawTokenMarkers() — scale markers to globalMaxTokens dynamically\n- getPositionX() — accept raw tokens + globalMax instead of utilization\n\n**RaceCanvas.js:**\n- Compute globalMaxTokens from all active sessions\n- Pass tokensUsed and maxContextTokens per-racer instead of contextUtilization\n- Update draw calls for track, pit, and parking lot zones\n\n**Racer.js:**\n- On-car metrics label (lines 1149-1221): already shows tokens/max, no major change\n\n**Dashboard.js:**\n- Leaderboard bars (lines 194-250): keep utilization-based coloring (green/amber/red thresholds)\n- Consider adding absolute token count column\n\n**main.js:**\n- Detail flyout (lines 209-225): already shows tokensUsed / maxContextTokens, no change needed","status":"closed","priority":4,"issue_type":"feature","owner":"markferree@gmail.com","created_at":"2026-02-18T17:04:10.865085331-08:00","created_by":"Mark Ferree","updated_at":"2026-02-18T17:28:15.892688206-08:00","closed_at":"2026-02-18T17:28:15.892688206-08:00","close_reason":"Prefix matching in config + per-lane absolute-scale finish lines"}
{"id":"agent-racer-13l","title":"Phase 7: Extract Dashboard from canvas to DOM","description":"Move Dashboard.js (261 lines) from canvas rendering to HTML/CSS DOM elements. Stats bar + leaderboard table. Dark theme matching current aesthetic. See docs/pixi-migration.md Phase 7.","status":"tombstone","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-07T14:14:50.276931568-08:00","created_by":"Mark Ferree","updated_at":"2026-02-07T20:23:27.286967736-08:00","close_reason":"Merged to main","dependencies":[{"issue_id":"agent-racer-13l","depends_on_id":"agent-racer-9ft","type":"blocks","created_at":"2026-02-07T14:14:59.841695804-08:00","created_by":"Mark Ferree"}],"deleted_at":"2026-02-07T20:23:27.286967736-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"agent-racer-16i","title":"Remove spoiler from cars - it looks silly","description":"Drop the spoiler visual element from the cars as it looks silly and detracts from the overall UI appearance.","status":"closed","priority":3,"issue_type":"feature","owner":"markferree@gmail.com","created_at":"2026-02-02T12:41:52.887259818-08:00","created_by":"Mark Ferree","updated_at":"2026-02-04T11:28:45.351973962-08:00","closed_at":"2026-02-04T11:28:45.351973962-08:00","close_reason":"Removed rear spoiler drawing code from Racer.js"}
{"id":"agent-racer-1gd","title":"Restrict server exposure (localhost default, origin checks, optional auth)","description":"Default host is 0.0.0.0 and WS CheckOrigin is permissive. Change defaults to localhost, implement origin allowlist (configurable), and add optional auth token/flag to reduce LAN exposure.","status":"closed","priority":1,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-01-31T16:30:58.755781244-08:00","created_by":"Mark Ferree","updated_at":"2026-01-31T16:42:26.22073574-08:00","closed_at":"2026-01-31T16:42:26.22073574-08:00","close_reason":"Closed"}
{"id":"agent-racer-1kh","title":"Frontend: Leaderboard badges + titles in Dashboard.js","description":"Add badge column and title prefix to existing leaderboard. Badge: emoji icon column between rank and session name. Title: text prefix before session name (e.g. 'Track Legend opus-refactor'). Read equipped badge/title from cosmetic state. Files: frontend/src/canvas/Dashboard.js","status":"closed","priority":3,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-18T16:35:21.138556935-08:00","created_by":"Mark Ferree","updated_at":"2026-02-23T19:31:25.695622405-08:00","closed_at":"2026-02-23T19:31:25.695622405-08:00","close_reason":"Closed","dependencies":[{"issue_id":"agent-racer-1kh","depends_on_id":"agent-racer-pk3","type":"blocks","created_at":"2026-02-18T16:35:24.785573006-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-1oe","title":"Test config.Load and config.NewPrivacyFilter","description":"config.go Load() and NewPrivacyFilter() are at 0% coverage. Load parses YAML and merges with defaults — bugs here cause silent misconfiguration (like completion_remove_after: 0s meaning 'never remove'). Test: valid YAML loading, missing file falls back to defaults, privacy filter construction from config, MaxContextTokens model lookup with fallback to default.","status":"closed","priority":3,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-05T20:30:02.877835964-08:00","created_by":"Mark Ferree","updated_at":"2026-02-13T08:42:58.934062205-08:00","closed_at":"2026-02-13T08:42:58.934062205-08:00","close_reason":"Merged config_test.go with 199 lines of tests for Load, NewPrivacyFilter, and MaxContextTokens"}
{"id":"agent-racer-1xb","title":"No scroll when number of agents grows past 6-7","description":"When the number of agents in the UI exceeds 6-7, there is no scrolling mechanism to view all agents. The UI becomes cramped or agents are cut off, making it impossible to view/interact with all agents.","status":"closed","priority":1,"issue_type":"bug","owner":"markferree@gmail.com","created_at":"2026-02-02T09:56:02.291134627-08:00","created_by":"Mark Ferree","updated_at":"2026-02-04T07:54:16.234248027-08:00","closed_at":"2026-02-04T07:54:16.234248027-08:00","close_reason":"Canvas now dynamically grows to fit all lanes and the container scrolls when lanes exceed viewport height. Flyout repositioned as fixed to handle scroll correctly."}
{"id":"agent-racer-1yd","title":"Test Racer spring physics, zone dimming, and error stages","description":"Unit tests for entities/Racer.js. Cover spring suspension convergence, lerp interpolation, zone dimming (pit/parking opacity), error stage progression timing, glow intensity by activity, activity transition detection, model color lookup.","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-07T20:30:01.21998254-08:00","created_by":"Mark Ferree","updated_at":"2026-02-13T14:06:56.803107397-08:00","closed_at":"2026-02-13T14:06:56.803107397-08:00","close_reason":"Merged Racer.test.js (500+ lines, 62 tests including utility methods)","dependencies":[{"issue_id":"agent-racer-1yd","depends_on_id":"agent-racer-dac","type":"blocks","created_at":"2026-02-07T20:30:19.523453707-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-1zl","title":"Phase 1: Backend SubagentState + JSONL Parsing","description":"Add SubagentState struct to state.go, parse type:progress entries in jsonl.go, extend SourceUpdate with Subagents map, propagate through monitor.go. See docs/SUBAGENT-PLAN.md Phase 1 (1a-1e).","status":"closed","priority":1,"issue_type":"feature","owner":"markferree@gmail.com","created_at":"2026-02-20T15:23:30.584360973-08:00","created_by":"Mark Ferree","updated_at":"2026-02-20T15:31:36.901291328-08:00","closed_at":"2026-02-20T15:31:36.901291328-08:00","close_reason":"Phase 1 complete: SubagentState struct, progress entry parsing, completion detection, SourceUpdate propagation, mergeSubagents in monitor","dependencies":[{"issue_id":"agent-racer-1zl","depends_on_id":"agent-racer-fx8","type":"blocks","created_at":"2026-02-20T15:23:51.839000477-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-22n","title":"Bug: engine noise rarely plays for non-haiku models","description":"Engine hum only triggers during thinking/tool_use activity (RaceCanvas.js:296-305). Slower models (sonnet/opus) likely spend more time in waiting/idle between bursts, so their engine sound cuts out frequently or never sustains. Haiku's faster response loop keeps it in thinking/tool_use more consistently. Investigate whether the stop threshold is too aggressive — may need a brief holdover/decay period after activity stops before cutting the engine sound. Key files: frontend/src/canvas/RaceCanvas.js (trigger logic), frontend/src/audio/SoundEngine.js (startEngine/stopEngine).","status":"closed","priority":2,"issue_type":"bug","owner":"markferree@gmail.com","created_at":"2026-02-20T16:01:35.783854181-08:00","created_by":"Mark Ferree","updated_at":"2026-02-20T18:48:41.880125417-08:00","closed_at":"2026-02-20T18:48:41.880125417-08:00","close_reason":"Added 1.5s grace period in SoundEngine.stopEngine() — engine keeps humming through brief gaps between thinking/tool_use bursts. startEngine() cancels pending stops seamlessly."}
{"id":"agent-racer-249","title":"Backend: Monitor integration - poll process activity","description":"Update monitor.go to poll process activity in main loop, cache by working directory, set IsChurning on SessionState. Integrate with existing session state updates.","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-04T07:51:24.242043224-08:00","created_by":"Mark Ferree","updated_at":"2026-02-04T11:26:39.27035057-08:00","closed_at":"2026-02-04T11:26:39.27035057-08:00","close_reason":"Already implemented in earlier commits (9e7d83f, 49aeea8, e39b5ff)","dependencies":[{"issue_id":"agent-racer-249","depends_on_id":"agent-racer-bzb","type":"discovered-from","created_at":"2026-02-04T07:51:24.243524714-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-255","title":"Pit lane for idle racers","description":"Instead of disappearing, idle/inactive racers roll off the racetrack and sit in a pit area below the track. The pit holds all non-terminated sessions (those not explicitly /exit'd) from a configurable timeframe. This gives visual persistence to sessions that are still alive but not actively working, rather than having them vanish and reappear. Needs: configurable time window for pit retention, animation for rolling off track into pit, pit layout below the main track, visual distinction between pit racers and active racers, racers should roll back onto the track when they become active again.","status":"closed","priority":2,"issue_type":"feature","owner":"markferree@gmail.com","created_at":"2026-02-02T17:28:56.739678082-08:00","created_by":"Mark Ferree","updated_at":"2026-02-04T08:07:18.748610322-08:00","closed_at":"2026-02-04T08:07:18.748610322-08:00","close_reason":"Implemented pit lane for idle racers"}
{"id":"agent-racer-26m","title":"API handler: POST /api/equip endpoint","description":"No /api/equip handler exists yet. Implement POST /api/equip that accepts {rewardID, slot} and returns the updated loadout. Return error for invalid slot or unknown/locked reward. Discovered while writing tests (agent-racer-06d).","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-22T12:51:56.932013817-08:00","created_by":"Mark Ferree","updated_at":"2026-02-23T17:16:05.880316097-08:00","closed_at":"2026-02-23T17:16:05.880316097-08:00","close_reason":"Closed"}
{"id":"agent-racer-28h","title":"Frontend: Trail presets in Particles.js","description":"Add new particle preset definitions selected by equipped trail ID. Trail presets: Blue Flame (blue particles, upward drift), Red Sparks (red scatter, short life), Rainbow (cycling hue), Afterburn (orange-to-red gradient, wide spread), Prismatic (refractive color split), Confetti Burst (multi-color squares on completion), Tire Smoke (gray puffs, ground-level), season particles. Files: frontend/src/canvas/Particles.js","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-18T16:34:55.449201156-08:00","created_by":"Mark Ferree","updated_at":"2026-02-23T19:32:50.054846803-08:00","closed_at":"2026-02-23T19:32:50.054846803-08:00","close_reason":"Closed","dependencies":[{"issue_id":"agent-racer-28h","depends_on_id":"agent-racer-pk3","type":"blocks","created_at":"2026-02-18T16:34:58.886286743-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-2j5","title":"WS event: battlepass_progress","description":"Broadcast after XP awards via WebSocket. Message type 'battlepass_progress' with payload: {xp, tier, tierProgress (0-1 float), recentXP: [{reason, amount}]}. Also broadcast on tier advancement with new reward info. Files: WebSocket broadcaster, backend/internal/gamification/battlepass.go","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-18T16:36:57.805163753-08:00","created_by":"Mark Ferree","updated_at":"2026-02-23T19:50:49.533145407-08:00","closed_at":"2026-02-23T19:50:49.533145407-08:00","close_reason":"Closed","dependencies":[{"issue_id":"agent-racer-2j5","depends_on_id":"agent-racer-ykn","type":"blocks","created_at":"2026-02-18T16:37:01.658714589-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-2mq","title":"Configuration: Add churning thresholds and intervals","description":"Add config.yaml entries for process_poll_interval, churning_cpu_threshold, churning_requires_network. Set sensible defaults.","status":"closed","priority":3,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-04T07:51:25.422215186-08:00","created_by":"Mark Ferree","updated_at":"2026-02-04T11:29:37.082307846-08:00","closed_at":"2026-02-04T11:29:37.082307846-08:00","close_reason":"Added churning_cpu_threshold and churning_requires_network configuration options to config.yaml with sensible defaults (15.0% CPU threshold, network requirement disabled)","dependencies":[{"issue_id":"agent-racer-2mq","depends_on_id":"agent-racer-bzb","type":"discovered-from","created_at":"2026-02-04T07:51:25.423992789-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-2nh","title":"Move context/session banner to side of car with transparent background","description":"The banner showing context window progress percentage and session length should be positioned on the side of the car below the model name, with a transparent background instead of floating above the car.","status":"closed","priority":2,"issue_type":"bug","owner":"markferree@gmail.com","created_at":"2026-02-07T14:48:49.055033427-08:00","created_by":"Mark Ferree","updated_at":"2026-02-18T16:49:12.371874702-08:00","closed_at":"2026-02-18T16:49:12.371874702-08:00","close_reason":"Moved metrics label onto car body (Y offset +16 → +12), reduced font from 11px to 9px, added semi-transparent rounded background for readability"}
{"id":"agent-racer-2tn","title":"REST endpoint: GET /api/stats","description":"Return current cumulative stats as JSON for frontend hydration on page load. No auth needed (same trust model as existing endpoints). Response schema matches stats.json structure.","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-18T16:27:06.145440944-08:00","created_by":"Mark Ferree","updated_at":"2026-02-20T15:50:27.137236974-08:00","closed_at":"2026-02-20T15:50:27.137236974-08:00","close_reason":"Closed","dependencies":[{"issue_id":"agent-racer-2tn","depends_on_id":"agent-racer-uke","type":"blocks","created_at":"2026-02-18T16:27:09.04070431-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-2w0","title":"Switching model with selector creates new car instead of updating existing car label","description":"When switching models using the model selector, the application creates a whole new car instead of changing the label on the existing car to reflect the new model name.","status":"closed","priority":2,"issue_type":"bug","owner":"markferree@gmail.com","created_at":"2026-02-02T09:41:48.185092652-08:00","created_by":"Mark Ferree","updated_at":"2026-02-02T10:04:11.252765187-08:00","closed_at":"2026-02-02T10:04:11.252765187-08:00","close_reason":"Fixed by ensuring filename-based session ID is used consistently, preventing new cars from being created when models switch"}
{"id":"agent-racer-2yr","title":"Phase 1: Add Vite + PixiJS build infrastructure","description":"Add Vite bundler, package.json with pixi.js/pixi-filters/vite deps. Configure Vite dev server to proxy /api and /ws to Go backend on :8080. Convert bare ES module imports. Verify existing app works through Vite. See docs/pixi-migration.md Phase 1.","status":"tombstone","priority":1,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-07T14:14:47.874775245-08:00","created_by":"Mark Ferree","updated_at":"2026-02-07T20:23:27.286967736-08:00","close_reason":"Added Vite + PixiJS build infrastructure. npm run dev/build work. All existing modules bundle cleanly.","deleted_at":"2026-02-07T20:23:27.286967736-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"agent-racer-34sz","title":"Incremental parse loses session slug — bash-progress phantoms leak through","description":"## Symptom\nPhantom subagents appear on the dashboard (bash-progress-0, etc.) even when no Task tool subagents are running. Visible in API: `curl localhost:8080/api/sessions` shows subagents with slug matching the parent session and IDs like `bash-progress-0`.\n\n## Root Cause\n`ParseSessionJSONL()` in `jsonl.go:145` builds `result.Slug` from non-progress JSONL entries (line 209). On incremental parses (offset \u003e 0), if the batch contains only progress entries, `result.Slug` stays empty. The slug filter at line 289:\n\n    if entry.Slug != \"\" \u0026\u0026 result.Slug != \"\" \u0026\u0026 entry.Slug == result.Slug { return }\n\n...short-circuits because `result.Slug == \"\"`, so `bash-progress-*` entries (which have toolUseID != parentToolUseID and carry the parent session's slug) pass through and create phantom subagents.\n\n## Evidence\n- All `bash-progress-*` entries have toolUseID != parentToolUseID but slug == parent session slug\n- API confirmed: 2 phantom subagents with slug=elegant-noodling-thunder, id=bash-progress-0\n- Reproduced live with no Task tool running\n\n## Fix Approach\nPass the session's known slug into `ParseSessionJSONL` so incremental batches can filter self-progress:\n\n1. Add `knownSlug string` param to `ParseSessionJSONL()` — seed `result.Slug` from it\n2. Add `Slug` field to `SessionHandle` in `source.go`\n3. Populate `handle.Slug` from session state in `monitor.go` (where KnownSubagentParents is populated)\n4. Pass `handle.Slug` through `ClaudeSource.Parse()` to the parser\n5. Update all `ParseSessionJSONL` call sites (tests + production)\n\nThe previously merged fix (a6b68fc) is correct and should be kept — it replaced the fundamentally broken `toolUseID == parentToolUseID` filter with slug-based detection. This bug is about making slug detection work across incremental parse boundaries.\n\n## Files to Modify\n- `backend/internal/monitor/jsonl.go` — add slug param, seed result.Slug\n- `backend/internal/monitor/claude_source.go` — pass known slug\n- `backend/internal/monitor/source.go` — add Slug to SessionHandle\n- `backend/internal/monitor/monitor.go` — populate handle.Slug from state\n- `backend/internal/monitor/jsonl_test.go` — update call signatures\n- `backend/internal/monitor/subagent_test.go` — update call signatures, add incremental slug test\n\n## Verification\n1. `go test ./internal/monitor/` passes\n2. No phantom subagents in `curl localhost:8080/api/sessions` when no Task tool is active\n3. Real Task tool subagents still appear as hamsters on dashboard","status":"closed","priority":1,"issue_type":"bug","owner":"markferree@gmail.com","created_at":"2026-02-23T10:13:15.310425425-08:00","created_by":"Mark Ferree","updated_at":"2026-02-23T10:19:59.077845235-08:00","closed_at":"2026-02-23T10:19:59.077845235-08:00","close_reason":"Fixed: added knownSlug param to ParseSessionJSONL so incremental batches filter self-progress. Regression test TestIncrementalBashProgressFiltered covers the bash-progress phantom case. Verified live: 0 phantom subagents after restart."}
{"id":"agent-racer-3f2","title":"Critical memory leak in browser - 20GB RAM usage","description":"**Severity:** Critical - browser consumed ~20GB RAM after being left open\n\n**Symptoms:**\n- Browser tab with game interface left open\n- Memory usage grew to ~20GB over time\n\n**Likely culprits to investigate:**\n1. **Particle system** - particles not being cleaned up after emission\n2. **Racer objects** - racers not properly removed, accumulating state\n3. **Canvas/context leaks** - offscreen canvases (glowCanvas, textureCanvas, crowdCanvas) not released\n4. **Animation frame callbacks** - requestAnimationFrame accumulating\n5. **WebSocket message handlers** - event listeners or closures retaining references\n6. **Session state maps** - sessions Map growing unbounded\n7. **Audio engine** - Web Audio nodes not disconnected\n\n**Debug approach:**\n1. Chrome DevTools → Memory → Heap snapshots over time\n2. Look for growing object counts (Racer, Particle, SessionState)\n3. Check for detached DOM nodes\n4. Profile with Performance Monitor for JS heap growth\n\n**Files to audit:**\n- frontend/src/canvas/Particles.js\n- frontend/src/canvas/RaceCanvas.js\n- frontend/src/entities/Racer.js\n- frontend/src/audio/SoundEngine.js\n- frontend/src/main.js (session handling)\n- frontend/src/websocket.js","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-02-05T11:13:14.555535-08:00","created_by":"mark.ferree","updated_at":"2026-02-05T18:57:25.921283373-08:00","closed_at":"2026-02-05T18:57:25.921283373-08:00","close_reason":"Fixed multiple memory leak issues: event listeners not removed, reconnect timeouts not tracked, canvas filter not reset, audio nodes not properly cleaned up"}
{"id":"agent-racer-3fk4","title":"Security: Remove auth token from URL query parameters","description":"Auth token is exposed in WebSocket URL query params (websocket.js:16-19, server.go:319). Tokens in URLs leak via browser history, server logs, and Referer headers. Switch to header-only auth (Authorization: Bearer). Remove ?token= support from both frontend and backend authorize().","status":"closed","priority":1,"issue_type":"bug","owner":"markferree@gmail.com","created_at":"2026-02-23T09:36:58.833541069-08:00","created_by":"Mark Ferree","updated_at":"2026-02-23T17:13:55.337692241-08:00","closed_at":"2026-02-23T17:13:55.337692241-08:00","close_reason":"Removed auth token from URL query params. Backend authorize() now only accepts Authorization: Bearer header. WebSocket uses first-message auth pattern. Frontend auth.js module centralizes token handling."}
{"id":"agent-racer-3gp","title":"Show model name alongside directory label above each car","description":"Update racer label to include model family/name next to the directory/session name (above the car) while keeping existing badges. Ensure layout remains readable.","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-01-31T16:58:50.948447465-08:00","created_by":"Mark Ferree","updated_at":"2026-02-02T09:52:49.516446995-08:00","closed_at":"2026-02-02T09:52:49.516446995-08:00","close_reason":"Closed"}
{"id":"agent-racer-3ho","title":"Frontend: BattlePassBar.js","description":"Battle pass progress bar between header and track. Collapsed (default): single row with season name, XP bar, tier indicator, recent XP toast. Expanded (on click): full tier track with reward icons, weekly challenge list with progress, XP log. Tier markers: completed=filled, current=pulsing, future=dimmed. Tier reward labels below markers. Listens for 'battlepass_progress' WS messages. Files: frontend/src/gamification/BattlePassBar.js, frontend/src/main.js","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-18T16:37:06.758150576-08:00","created_by":"Mark Ferree","updated_at":"2026-02-24T19:41:21.171871697-08:00","closed_at":"2026-02-24T19:41:21.171871697-08:00","close_reason":"Closed","dependencies":[{"issue_id":"agent-racer-3ho","depends_on_id":"agent-racer-2j5","type":"blocks","created_at":"2026-02-18T16:37:10.268201739-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-3jk","title":"E2E: canvas renders racers from WebSocket snapshot","description":"Playwright E2E test against running app (make dev). Navigate to the frontend, wait for WebSocket connection (status indicator shows connected), verify at least one racer appears on canvas when sessions are active. Use browser_snapshot and browser_take_screenshot to confirm cars are drawn. Test with real or mock backend data.","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-07T20:32:37.210364015-08:00","created_by":"Mark Ferree","updated_at":"2026-02-13T08:47:55.646026686-08:00","closed_at":"2026-02-13T08:47:55.646026686-08:00","close_reason":"Merged Playwright E2E test for canvas racer rendering + test infrastructure"}
{"id":"agent-racer-3mu","title":"Define unified session source interface","description":"Create backend/internal/monitor/sources interface (Discover/Parse/Metadata) and shared ParseResult/SessionHandle types to support Claude/Codex/Gemini.","notes":"Modularity: define source interface so backend parsing is reusable by any UI; avoid duplicating parsing/state logic per agent.","status":"closed","priority":1,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-01-31T16:46:32.149129125-08:00","created_by":"Mark Ferree","updated_at":"2026-02-01T11:55:50.95845188-08:00","closed_at":"2026-02-01T11:55:50.95845188-08:00","close_reason":"Created source.go with Source interface, SessionHandle, and SourceUpdate types"}
{"id":"agent-racer-40y6","title":"Architecture: Stats event channel backpressure","description":"Stats event channel uses non-blocking send — events are silently dropped if consumer is slow (monitor.go). This can cause achievements and stats to be incomplete without any indication. Add: buffered channel with configurable capacity, log/metric when events are dropped, consider sampling under load.","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-23T09:37:22.385759863-08:00","created_by":"Mark Ferree","updated_at":"2026-02-23T19:19:09.960272498-08:00","closed_at":"2026-02-23T19:19:09.960272498-08:00","close_reason":"Closed"}
{"id":"agent-racer-4hw","title":"Backend: Process discovery for macOS/Linux","description":"Implement process_darwin.go and process_linux.go to discover Claude processes by working directory and read CPU% and TCP connection counts. Return ProcessActivity struct with PID, CPU, TCPConns, WorkingDir.","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-04T07:51:23.851400478-08:00","created_by":"Mark Ferree","updated_at":"2026-02-04T17:54:52.085056482-08:00","closed_at":"2026-02-04T17:54:52.085056482-08:00","close_reason":"Superseded by agent-racer-hjs (gopsutil cross-platform refactor)","dependencies":[{"issue_id":"agent-racer-4hw","depends_on_id":"agent-racer-bzb","type":"discovered-from","created_at":"2026-02-04T07:51:23.852883962-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-4if","title":"Frontend: Alternate car body polygons in Racer.js","description":"Add alternate polygon vertex arrays for car body cosmetics. Bodies: Default (current), Formula (low and wide), Luxury (longer, rounded), Armored (angular, aggressive). Select body polygon by equipped body ID. See ASCII art in docs/GAMIFICATION-PLAN.md for reference shapes. Files: frontend/src/entities/Racer.js","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-18T16:35:02.924047466-08:00","created_by":"Mark Ferree","updated_at":"2026-02-23T19:34:28.794774797-08:00","closed_at":"2026-02-23T19:34:28.794774797-08:00","close_reason":"Closed","dependencies":[{"issue_id":"agent-racer-4if","depends_on_id":"agent-racer-pk3","type":"blocks","created_at":"2026-02-18T16:35:06.175849615-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-4l6q","title":"Architecture: Add WS message sequence numbers","description":"WebSocket messages have no sequence numbers. After reconnect, deltas can arrive out of order or before the snapshot completes. Add a monotonic sequence number to all WSMessages. Frontend should apply deltas in order and request re-sync if a gap is detected. Affects broadcast.go and websocket.js.","status":"closed","priority":2,"issue_type":"feature","owner":"markferree@gmail.com","created_at":"2026-02-23T09:37:12.704274188-08:00","created_by":"Mark Ferree","updated_at":"2026-02-23T19:05:40.25713264-08:00","closed_at":"2026-02-23T19:05:40.25713264-08:00","close_reason":"Closed"}
{"id":"agent-racer-4uf","title":"Test notifications permission handling and message construction","description":"Unit tests for notifications.js. Cover requestPermission state handling, notifyCompletion title/body construction for complete/errored/lost activities. Mock Notification API.","status":"closed","priority":3,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-07T20:30:10.257578607-08:00","created_by":"Mark Ferree","updated_at":"2026-02-13T14:06:55.143685007-08:00","closed_at":"2026-02-13T14:06:55.143685007-08:00","close_reason":"Merged notifications.test.js (134 lines, 10 tests)","dependencies":[{"issue_id":"agent-racer-4uf","depends_on_id":"agent-racer-dac","type":"blocks","created_at":"2026-02-07T20:30:21.126054506-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-503","title":"Migrate frontend to PixiJS v8","description":"Replace vanilla Canvas 2D rendering with PixiJS v8. See docs/pixi-migration.md for full plan.","status":"closed","priority":1,"issue_type":"epic","owner":"markferree@gmail.com","created_at":"2026-02-07T14:14:27.501467814-08:00","created_by":"Mark Ferree","updated_at":"2026-02-07T20:23:24.853686869-08:00","closed_at":"2026-02-07T20:23:24.853686869-08:00","close_reason":"Cancelling PixiJS migration"}
{"id":"agent-racer-53h","title":"Add config flag to hide Gemini/Codex models","description":"Add a configuration option to disable/hide Gemini and Codex models from the UI by default. These models should only appear if explicitly enabled via config. This allows us to deprioritize Gemini/Codex-specific work and focus on core racing features (pit lane, churning, etc.).","status":"closed","priority":1,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-04T07:42:58.286760622-08:00","created_by":"Mark Ferree","updated_at":"2026-02-04T07:45:44.086064451-08:00","closed_at":"2026-02-04T07:45:44.086064451-08:00","close_reason":"Added sources config section with claude/codex/gemini boolean flags. Claude enabled by default, Codex and Gemini disabled. Config drives conditional source registration in main.go."}
{"id":"agent-racer-56y","title":"CI: run Playwright E2E tests on push/PR","description":"Add GitHub Actions workflow (or job in existing workflow) to run Playwright E2E tests. Requires: build and start the Go backend + frontend, install Playwright browsers, run E2E test suite, upload screenshots as artifacts on failure. Consider running E2E only on PR (not every push) if runtime is a concern.","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-07T20:33:46.434589665-08:00","created_by":"Mark Ferree","updated_at":"2026-02-13T08:53:55.994969675-08:00","closed_at":"2026-02-13T08:53:55.994969675-08:00","close_reason":"Added vitest and e2e jobs to .github/workflows/ci.yml","dependencies":[{"issue_id":"agent-racer-56y","depends_on_id":"agent-racer-3jk","type":"blocks","created_at":"2026-02-07T20:33:52.56966735-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-59e","title":"Flyout window positioned incorrectly for cars in bottom half of screen","description":"The flyout window displays correctly for the first 3-4 cars, but when cars are positioned in the bottom half of the screen, the flyout window is placed in the wrong location, likely overlapping or appearing off-screen.","status":"closed","priority":2,"issue_type":"bug","owner":"markferree@gmail.com","created_at":"2026-02-02T12:12:07.453717828-08:00","created_by":"Mark Ferree","updated_at":"2026-02-04T11:29:00.757574334-08:00","closed_at":"2026-02-04T11:29:00.757574334-08:00","close_reason":"Fixed vertical positioning logic to check available space below car before positioning flyout. When positioned to the right/left, flyout now flips above the car if insufficient space below, preventing cutoff."}
{"id":"agent-racer-5esd","title":"Architecture: Make monitor→store→broadcaster update atomic","description":"monitor.go calls store.Update() and broadcaster.QueueUpdate() in separate calls (lines 294, 300). Between them, an HTTP request can read partial state via store.GetAll(). Wrap both in a single synchronized block or provide a combined UpdateAndBroadcast method.","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-23T09:37:20.00214073-08:00","created_by":"Mark Ferree","updated_at":"2026-02-23T19:20:43.880199123-08:00","closed_at":"2026-02-23T19:20:43.880199123-08:00","close_reason":"Added UpdateAndNotify, BatchUpdateAndNotify, BatchRemoveAndNotify to Store. Updated monitor.poll(), markTerminal(), and flushRemovals() to use atomic variants. All tests pass."}
{"id":"agent-racer-5jm","title":"Test broadcaster privacy filtering with real Store and filter","description":"ws/broadcast.go has 0% coverage. Test the FilterSessions method directly — it takes a slice and returns a filtered slice, pure function style. Also test that SetPrivacyFilter wires through correctly. Use a real Store and real PrivacyFilter, no mock websocket connections needed for the filtering logic.","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-05T20:30:02.187925703-08:00","created_by":"Mark Ferree","updated_at":"2026-02-07T12:42:15.766433231-08:00","closed_at":"2026-02-07T12:42:15.766433231-08:00","close_reason":"Added broadcast_test.go with 12 tests covering FilterSessions and SetPrivacyFilter using real Store and PrivacyFilter"}
{"id":"agent-racer-5mr","title":"Add SourceUpdate.MaxContextTokens for dynamic context ceiling","description":"Currently MaxContextTokens is resolved entirely from config.yaml model name lookup. Sources should be able to report the context ceiling directly via SourceUpdate if they discover it from session data (e.g., a max_tokens field in Codex token_count events, or Gemini model metadata). Add an optional MaxContextTokens field to SourceUpdate. When non-zero, the monitor should prefer it over the static config lookup. This decouples context window sizing from hardcoded config and handles new/unknown models gracefully.","status":"closed","priority":1,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-01T17:37:26.124306688-08:00","created_by":"Mark Ferree","updated_at":"2026-02-01T17:39:20.618019983-08:00","closed_at":"2026-02-01T17:39:20.618019983-08:00","close_reason":"Added MaxContextTokens field to SourceUpdate. Monitor prefers source-reported value over static config when non-zero."}
{"id":"agent-racer-5o0","title":"E2E: dashboard leaderboard renders with session data","description":"Playwright E2E test. With multiple sessions active, verify the dashboard panel renders: correct session counts (RACING/PIT/PARKED), leaderboard sorted by context utilization, token counts formatted correctly. Use browser_evaluate to inject session data and browser_take_screenshot to verify rendering.","status":"closed","priority":3,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-07T20:32:29.672281983-08:00","created_by":"Mark Ferree","updated_at":"2026-02-13T14:06:59.29270297-08:00","closed_at":"2026-02-13T14:06:59.29270297-08:00","close_reason":"Merged dashboard-leaderboard.spec.ts (153 lines, 6 tests)"}
{"id":"agent-racer-5vzi","title":"Architecture: Add RaceCanvas destroy() method","description":"RaceCanvas.js attaches resize, click, and mousemove event listeners via arrow functions that are never cleaned up. If the component is destroyed/removed from DOM, listeners leak. Add an explicit destroy() method that removes all listeners and cancels the animation frame.","status":"closed","priority":3,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-23T09:37:32.329896349-08:00","created_by":"Mark Ferree","updated_at":"2026-02-23T19:25:06.695278518-08:00","closed_at":"2026-02-23T19:25:06.695278518-08:00","close_reason":"Already resolved — destroy() method exists"}
{"id":"agent-racer-5wh","title":"Implement FILE-SESSION-PLAN.md","status":"closed","priority":1,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-01-31T16:05:12.552086611-08:00","created_by":"Mark Ferree","updated_at":"2026-01-31T17:14:53.797896592-08:00","closed_at":"2026-01-31T17:14:53.797896592-08:00","close_reason":"Closed"}
{"id":"agent-racer-606u","title":"Security: Tighten WebSocket origin checking","description":"server.go:335-376 — requests with missing Origin header are accepted (line 337-339), and localhost origins are always allowed. For production: reject missing Origin when allowed_origins is configured, document that localhost acceptance is dev-only, validate at least one origin is configured if a production flag is set.","status":"closed","priority":3,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-23T09:37:30.253974764-08:00","created_by":"Mark Ferree","updated_at":"2026-02-23T19:15:38.260127483-08:00","closed_at":"2026-02-23T19:15:38.260127483-08:00","close_reason":"Closed"}
{"id":"agent-racer-60a","title":"Frontend: RewardSelector.js (garage UI)","description":"Canvas overlay accessed from achievement panel. Columns per slot type (Paint, Trail, Body, Badge, Sound, Track Theme, Title). Rows per available reward. States: EQUIPPED (highlighted border), EQUIP (clickable), LOCKED (dimmed + requirement text showing which achievement needed). Calls POST /api/equip on click, updates global cosmetic state. Close with X button. Files: frontend/src/gamification/RewardSelector.js","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-18T16:35:31.647510964-08:00","created_by":"Mark Ferree","updated_at":"2026-02-23T19:37:03.343529331-08:00","closed_at":"2026-02-23T19:37:03.343529331-08:00","close_reason":"Closed","dependencies":[{"issue_id":"agent-racer-60a","depends_on_id":"agent-racer-ijm","type":"blocks","created_at":"2026-02-18T16:35:36.384397331-08:00","created_by":"Mark Ferree"},{"issue_id":"agent-racer-60a","depends_on_id":"agent-racer-pk3","type":"blocks","created_at":"2026-02-18T16:35:36.742992126-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-617","title":"Sanitize detail panel rendering","description":"Detail panel uses innerHTML with workingDir/session fields. Switch to textContent or escape values to avoid HTML injection from directory names.","status":"closed","priority":1,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-01-31T16:32:20.505271444-08:00","created_by":"Mark Ferree","updated_at":"2026-02-01T11:52:01.408230003-08:00","closed_at":"2026-02-01T11:52:01.408230003-08:00","close_reason":"Escaped all user-controlled strings in innerHTML template with esc() helper"}
{"id":"agent-racer-65k","title":"Add favicon.ico","description":"Server returns 404 for /favicon.ico. Add a simple racing flag or car favicon to eliminate the console error and give the tab an icon.","status":"closed","priority":3,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-05T19:59:25.133781223-08:00","created_by":"Mark Ferree","updated_at":"2026-02-18T16:49:48.46425709-08:00","closed_at":"2026-02-18T16:49:48.46425709-08:00","close_reason":"Closed"}
{"id":"agent-racer-693","title":"Implement Gemini source ingestion","description":"Add GeminiSource implementation (Discover/Parse/Metadata). Requires research results from agent-racer-7jo and interface from agent-racer-3mu. Add fixtures/tests.","notes":"Modularity: implement Gemini source as plug-in to shared Source interface; avoid duplicating monitor/state logic.","status":"closed","priority":1,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-01-31T16:47:12.319610632-08:00","created_by":"Mark Ferree","updated_at":"2026-02-01T16:12:13.399039907-08:00","closed_at":"2026-02-01T16:12:13.399039907-08:00","close_reason":"Implemented GeminiSource with full JSON re-parse, SHA-256 hash-to-path lookup from process scanning, mtime-based skip for unchanged files.","dependencies":[{"issue_id":"agent-racer-693","depends_on_id":"agent-racer-7jo","type":"blocks","created_at":"2026-01-31T16:51:15.748633417-08:00","created_by":"Mark Ferree"},{"issue_id":"agent-racer-693","depends_on_id":"agent-racer-3mu","type":"blocks","created_at":"2026-01-31T16:51:29.042993798-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-6gi4","title":"Security: Add JSONL file size limits","description":"jsonl.go:143-242 has no file size validation before parsing. bufio.ReadBytes has no max line length. Malicious or runaway JSONL files could cause OOM. Add: file size check before parsing (e.g., 500MB max), per-line max length via bufio.NewReaderSize (e.g., 1MB), and graceful skip with warning.","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-23T09:37:17.7586537-08:00","created_by":"Mark Ferree","updated_at":"2026-02-23T17:51:23.047110275-08:00","closed_at":"2026-02-23T17:51:23.047110275-08:00","close_reason":"Closed"}
{"id":"agent-racer-6n7","title":"Test Dashboard sorting, filtering, and formatting","description":"Unit tests for canvas/Dashboard.js. Cover: session categorization (racing/pit/parked counts), leaderboard sorting by context utilization descending, max 12 row truncation, token formatting, elapsed time display, context bar color thresholds (green \u003c50%, amber 50-80%, red \u003e80%). Feed Dashboard mock session data and assert computed values.","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-07T20:28:47.986994037-08:00","created_by":"Mark Ferree","updated_at":"2026-02-13T14:06:57.219198768-08:00","closed_at":"2026-02-13T14:06:57.219198768-08:00","close_reason":"Merged Dashboard.test.js (308+ lines, 35 tests including shortName/shortModel)","dependencies":[{"issue_id":"agent-racer-6n7","depends_on_id":"agent-racer-dac","type":"blocks","created_at":"2026-02-07T20:30:18.302114668-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-6va","title":"Fix scheduleRemoval treating 0s as never-remove","description":"In monitor.go:354, scheduleRemoval checks CompletionRemoveAfter \u003c= 0 and returns early, treating 0s as 'never remove' instead of 'remove immediately'. Change the guard to \u003c 0 so that 0s means immediate removal. This causes terminal sessions to never get removed from the store or added to removedKeys, enabling zombie re-detection cycles.","status":"closed","priority":0,"issue_type":"bug","owner":"markferree@gmail.com","created_at":"2026-02-05T19:28:59.671894812-08:00","created_by":"Mark Ferree","updated_at":"2026-02-05T19:31:46.233598725-08:00","closed_at":"2026-02-05T19:31:46.233598725-08:00","close_reason":"Fixed scheduleRemoval guard from \u003c= 0 to \u003c 0 so zero duration means immediate removal"}
{"id":"agent-racer-6xi5","title":"Architecture: Cap tokenSnapshots with rolling window","description":"tokenSnapshots array in monitor.go grows unbounded for the lifetime of a session. Long-running sessions (hours) accumulate snapshots causing memory leak. Cap to a rolling window (e.g., last 10 snapshots or last 10 minutes) since burn rate calculation only needs recent data.","status":"closed","priority":2,"issue_type":"bug","owner":"markferree@gmail.com","created_at":"2026-02-23T09:37:14.742617783-08:00","created_by":"Mark Ferree","updated_at":"2026-02-23T17:50:36.977196517-08:00","closed_at":"2026-02-23T17:50:36.977196517-08:00","close_reason":"Closed"}
{"id":"agent-racer-6yt","title":"Replace detail popover with car-attached flyout showing full metadata","description":"On car click, show a flyout anchored to the car (not a global popover). Flyout should expand to display full metadata (working dir, session ID, timestamps, model, tokens, tool stats, etc.) and handle overflow/long text.","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-01-31T16:59:44.274239742-08:00","created_by":"Mark Ferree","updated_at":"2026-02-02T10:06:05.785341006-08:00","closed_at":"2026-02-02T10:06:05.785341006-08:00","close_reason":"Implemented car-attached flyout with dynamic positioning, arrow indicators, full metadata display, and overflow handling. Flyout intelligently positions itself near the clicked car (right, left, above, or below) to stay on screen."}
{"id":"agent-racer-70a","title":"Frontend: Badge rendering in name labels","description":"Render equipped badge emoji/sprite next to session name in the label area above the car. Badges: Claude logo, Wrench (tool fiend), Phoenix (crash survivor), Chat Bubble (conversationalist), Star x3 (hat trick), Collector, season emblems. Emoji-based initially, sprite-based later. Files: frontend/src/entities/Racer.js","status":"closed","priority":3,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-18T16:35:11.99231199-08:00","created_by":"Mark Ferree","updated_at":"2026-02-23T19:32:10.073500742-08:00","closed_at":"2026-02-23T19:32:10.073500742-08:00","close_reason":"Closed","dependencies":[{"issue_id":"agent-racer-70a","depends_on_id":"agent-racer-pk3","type":"blocks","created_at":"2026-02-18T16:35:15.461262161-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-73h","title":"Tests: battle pass engine","description":"Test XP accumulation for each award type. Test tier boundaries: XP at exactly tier threshold advances, XP below does not. Test tier advancement emits correct event. Weekly challenge: progress tracking, completion detection, challenge rotation. Season reset: preserves achievements but clears XP and tier. Edge cases: max tier reached, zero XP, multiple tier advancement in single XP award. Files: backend/internal/gamification/battlepass_test.go","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-18T16:37:23.605211698-08:00","created_by":"Mark Ferree","updated_at":"2026-02-23T19:49:43.864146758-08:00","closed_at":"2026-02-23T19:49:43.864146758-08:00","close_reason":"Closed","dependencies":[{"issue_id":"agent-racer-73h","depends_on_id":"agent-racer-ykn","type":"blocks","created_at":"2026-02-18T16:37:27.107536804-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-75d","title":"tmux-spawn: add -- separator before prompt when using --add-dir","description":"When the /tmux-spawn skill constructs the claude CLI command with --add-dir, the positional prompt argument is silently swallowed by the arg parser. The spawned session launches interactively but with no initial message.\n\n**Reproduction:**\n```bash\n# Broken — claude starts with no prompt:\ntmux new-window -c /path/to/worktree \\\n  \"claude --add-dir /path/to/repo 'Your task is...'\"\n\n# Fixed — prompt is delivered:\ntmux new-window -c /path/to/worktree \\\n  \"claude --add-dir /path/to/repo -- 'Your task is...'\"\n```\n\n**Root cause:** The claude CLI arg parser treats the string after --add-dir ambiguously when no -- separator is present. The positional prompt argument gets consumed as part of flag parsing rather than being recognized as the initial message.\n\n**Fix:** In the /tmux-spawn skill template, change the spawn command from:\n```\nclaude --add-dir '$REPO_ROOT' '\u003cseed-prompt\u003e'\n```\nto:\n```\nclaude --add-dir '$REPO_ROOT' -- '\u003cseed-prompt\u003e'\n```\n\nThis only affects invocations that use --add-dir. Without that flag, the bare `claude 'prompt'` form works fine.","status":"closed","priority":2,"issue_type":"bug","owner":"markferree@gmail.com","created_at":"2026-02-07T14:32:35.182437836-08:00","created_by":"Mark Ferree","updated_at":"2026-02-07T14:33:22.096312857-08:00","closed_at":"2026-02-07T14:33:22.096312857-08:00","close_reason":"Fixing in claude config outside this repo"}
{"id":"agent-racer-7bp","title":"Phase 3: Port Track renderer to PixiJS Graphics","description":"Port Track.js (581 lines) from Canvas 2D to PixiJS Graphics objects. Includes asphalt, lanes, start/finish, token markers, pit lane, parking lot, spectator crowd, pennant flags. See docs/pixi-migration.md Phase 3.","status":"tombstone","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-07T14:14:48.662351615-08:00","created_by":"Mark Ferree","updated_at":"2026-02-07T20:23:27.286967736-08:00","close_reason":"Merged to main","dependencies":[{"issue_id":"agent-racer-7bp","depends_on_id":"agent-racer-9ft","type":"blocks","created_at":"2026-02-07T14:14:58.273620996-08:00","created_by":"Mark Ferree"}],"deleted_at":"2026-02-07T20:23:27.286967736-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"agent-racer-7jo","title":"Research Gemini CLI session/log storage","description":"Identify Gemini CLI local log/history paths, schema (tokens/model/tool usage), session identifiers, and working dir mapping. Document in docs/multiagent-sources.md.","status":"closed","priority":1,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-01-31T16:46:18.386231272-08:00","created_by":"Mark Ferree","updated_at":"2026-02-01T12:01:01.971346822-08:00","closed_at":"2026-02-01T12:01:01.971346822-08:00","close_reason":"Research complete, documented in docs/gemini-source-research.md. Key challenge: non-incremental JSON format and one-way project path hashing."}
{"id":"agent-racer-7k8","title":"Gemini model does not show forward progress, stays at start line","description":"When using the Gemini model, the car does not move forward on the track. The car remains at the starting position instead of progressing through the race.","status":"closed","priority":4,"issue_type":"bug","owner":"markferree@gmail.com","created_at":"2026-02-02T12:17:52.002977542-08:00","created_by":"Mark Ferree","updated_at":"2026-02-05T20:21:18.817108823-08:00","closed_at":"2026-02-05T20:21:18.817108823-08:00","close_reason":"Fixed Gemini session parsing: content UnmarshalJSON handles string, added gemini role type, tokens/toolCalls/thoughts at message level, absolute-to-delta count conversion"}
{"id":"agent-racer-7lg","title":"Phase 6: Bloom + Particles for Hamsters","description":"Hamsters contribute to bloom pass, tiny exhaust puffs from skateboard, small confetti burst on completion, spark effect at rope break. See docs/SUBAGENT-PLAN.md Phase 6.","status":"closed","priority":2,"issue_type":"feature","owner":"markferree@gmail.com","created_at":"2026-02-20T15:23:40.499542771-08:00","created_by":"Mark Ferree","updated_at":"2026-02-20T18:55:38.306629267-08:00","closed_at":"2026-02-20T18:55:38.306629267-08:00","close_reason":"Phase 6 bloom + particles implemented: exhaust puffs during active states, celebration on completion, sparks on rope snap, and colored hamster glow in bloom pass","dependencies":[{"issue_id":"agent-racer-7lg","depends_on_id":"agent-racer-evc","type":"blocks","created_at":"2026-02-20T15:23:53.571594923-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-8by","title":"Replace hover highlight box with better clickable indicator","description":"When hovering over a car with a tmux target, the current hover indicator is a rounded rectangle drawn with hardcoded dimensions (40*S × 18*S in Racer.js:512-520) that doesn't match the actual car/limo size. The hitbox (HIT_LEFT=125, HIT_RIGHT=60, ~185px total) is much larger than the highlight box (~92px), so the visual feedback looks mis-sized.\n\n**Current behavior:** A small, poorly-sized rounded rectangle outline appears around the car on hover.\n\n**Desired behavior:** A more polished visual indicator that the car is clickable — e.g., a subtle glow, underline, scale pulse, or outline that actually matches the car geometry. The user is fine with an animation but wants something better than a mis-sized box.\n\n**Key files:**\n- frontend/src/entities/Racer.js:512-520 — draws the hover highlight\n- frontend/src/canvas/RaceCanvas.js:8-17 — hitbox dimensions\n- frontend/src/canvas/RaceCanvas.js:529-542 — mousemove handler sets racer.hovered","status":"closed","priority":2,"issue_type":"bug","owner":"markferree@gmail.com","created_at":"2026-02-18T17:03:36.123863486-08:00","created_by":"Mark Ferree","updated_at":"2026-02-18T17:09:41.518999865-08:00","closed_at":"2026-02-18T17:09:41.518999865-08:00","close_reason":"Replaced mis-sized roundRect hover box with pulsing radial glow using team color, sized to LIMO_STRETCH"}
{"id":"agent-racer-8cf","title":"Refactor monitor to aggregate multi-agent sources","description":"Replace single-source discovery with list of sources (Claude/Codex/Gemini). Track sessions by composite key, per-source offsets, and staleness. Depends on: agent-racer-3mu, agent-racer-wtc, agent-racer-7jo.","notes":"Modularity: aggregate sources via shared interface; keep monitor independent of frontend and avoid per-agent special cases where possible.","status":"closed","priority":1,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-01-31T16:46:45.563391955-08:00","created_by":"Mark Ferree","updated_at":"2026-02-01T16:12:02.389131283-08:00","closed_at":"2026-02-01T16:12:02.389131283-08:00","close_reason":"Refactored monitor to use []Source interface. ClaudeSource wraps existing JSONL parsing. Tracked sessions keyed by source:sessionID composite key.","dependencies":[{"issue_id":"agent-racer-8cf","depends_on_id":"agent-racer-3mu","type":"blocks","created_at":"2026-01-31T16:50:09.894130274-08:00","created_by":"Mark Ferree"},{"issue_id":"agent-racer-8cf","depends_on_id":"agent-racer-wtc","type":"blocks","created_at":"2026-01-31T16:50:22.336914705-08:00","created_by":"Mark Ferree"},{"issue_id":"agent-racer-8cf","depends_on_id":"agent-racer-7jo","type":"blocks","created_at":"2026-01-31T16:50:35.829990585-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-8qld","title":"Security: Fix XSS in AchievementPanel tooltips","description":"AchievementPanel.js:413-417 uses innerHTML with unsanitized achievement.name and achievement.description. If these contain HTML/JS, it executes. Fix: use textContent or the existing esc() helper. Note: main.js detail flyout already escapes correctly via esc().","status":"closed","priority":1,"issue_type":"bug","owner":"markferree@gmail.com","created_at":"2026-02-23T09:37:01.166125013-08:00","created_by":"Mark Ferree","updated_at":"2026-02-23T17:11:54.257878578-08:00","closed_at":"2026-02-23T17:11:54.257878578-08:00","close_reason":"Added escapeHTML() helper and applied it to all three unsanitized innerHTML interpolations in AchievementPanel.js (tooltip name, description, and error message)"}
{"id":"agent-racer-8xs","title":"E2E: connection status indicator reflects WebSocket state","description":"Playwright E2E test. Verify connection status indicator shows 'connected' when WebSocket is open. Stop the backend and verify indicator changes to 'disconnected'. Restart backend and verify reconnection (indicator returns to connected). Use browser_snapshot to check DOM state.","status":"closed","priority":3,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-07T20:32:43.816640042-08:00","created_by":"Mark Ferree","updated_at":"2026-02-13T14:06:58.877016322-08:00","closed_at":"2026-02-13T14:06:58.877016322-08:00","close_reason":"Merged connection-status.spec.ts (86 lines)"}
{"id":"agent-racer-93n","title":"Use Claude SessionEnd hook to mark completion and remove racer after animation","description":"Integrate Claude Code SessionEnd hook as primary completion signal (keep idle timeout as fallback). When hook fires, trigger completion animation, then remove session from store/UI after a short TTL or explicit animation end. Update install/docs to configure hook.","status":"closed","priority":1,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-01-31T17:25:24.514790865-08:00","created_by":"Mark Ferree","updated_at":"2026-01-31T17:34:54.273478888-08:00","closed_at":"2026-01-31T17:34:54.273478888-08:00","close_reason":"Closed"}
{"id":"agent-racer-9ak","title":"Add removedKeys entry when stale detection cleans up terminal sessions","description":"In monitor.go stale detection (lines 281-314), when a terminal session's tracking entry is removed via delete(m.tracked, key), it is NOT added to m.removedKeys. This means the next poll cycle re-discovers the file, creates new tracking with offset 0, re-parses all old data as 'new', and resumes the terminal session — causing a zombie flickering cycle. Fix: add m.removedKeys[key] = true when removing terminal sessions in stale detection. This is defense-in-depth alongside the scheduleRemoval fix.","status":"closed","priority":0,"issue_type":"bug","owner":"markferree@gmail.com","created_at":"2026-02-05T19:29:01.924020022-08:00","created_by":"Mark Ferree","updated_at":"2026-02-05T19:35:49.776639422-08:00","closed_at":"2026-02-05T19:35:49.776639422-08:00","close_reason":"Added m.removedKeys[key]=true in stale detection for terminal sessions, with test"}
{"id":"agent-racer-9ft","title":"Phase 2: Create PixiJS Application shell + scene graph","description":"Replace raw canvas + RAF loop with PixiJS Application. Build Container hierarchy (track/pit/parkingLot/particlesBehind/racerContainer/particlesFront/uiContainer). Bridge existing Canvas 2D draw() into a Sprite texture temporarily. See docs/pixi-migration.md Phase 2.","notes":"ACTUAL IMPLEMENTATION: Created minimal bridge (plain canvas + Ticker) instead of full PixiJS Application. No WebGL, no scene graph, no Container hierarchy. This was intentional due to CanvasSource/Sprite bridge issues discovered during implementation. Phase 8 Integration will create the real Application and wire up the PixiJS renderers from phases 3-7.","status":"tombstone","priority":1,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-07T14:14:48.264759168-08:00","created_by":"Mark Ferree","updated_at":"2026-02-07T20:23:27.286967736-08:00","close_reason":"PixiJS Application shell created with Container hierarchy and Canvas 2D bridge texture. Build passes, dev server works.","dependencies":[{"issue_id":"agent-racer-9ft","depends_on_id":"agent-racer-2yr","type":"blocks","created_at":"2026-02-07T14:14:57.882757562-08:00","created_by":"Mark Ferree"}],"deleted_at":"2026-02-07T20:23:27.286967736-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"agent-racer-ain","title":"Integration test monitor.poll() with real sources and temp files","description":"monitor.go poll() is at 0% coverage and is where all 3 zombie session bugs lived today. Write integration tests using real ClaudeSource pointed at temp JSONL files, a real Store, and a real Broadcaster. No mocks — test the actual code path end-to-end. Should cover: (1) normal session lifecycle, (2) terminal session not re-created after removal, (3) dead sessions skipped on startup when LastTime exceeds stale threshold, (4) WorkingDir updated when cwd changes mid-session.","status":"closed","priority":1,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-05T20:30:00.947056803-08:00","created_by":"Mark Ferree","updated_at":"2026-02-07T12:21:57.829089438-08:00","closed_at":"2026-02-07T12:21:57.829089438-08:00","close_reason":"Added 10 integration tests for monitor.poll() covering all 4 zombie session bug scenarios plus additional edge cases"}
{"id":"agent-racer-ait9","title":"Architecture: Add SIGHUP config reload","description":"Config is loaded once at startup (config.go). Changes require full server restart. Add a SIGHUP handler that re-reads config.yaml and applies changes to model resolution, privacy settings, and source configuration without restart. Log what changed on reload.","status":"closed","priority":3,"issue_type":"feature","owner":"markferree@gmail.com","created_at":"2026-02-23T09:37:24.796346445-08:00","created_by":"Mark Ferree","updated_at":"2026-02-23T19:19:03.506924536-08:00","closed_at":"2026-02-23T19:19:03.506924536-08:00","close_reason":"Closed"}
{"id":"agent-racer-ajc","title":"Keep pit lane visible when empty","description":"The pit lane area disappears from the UI when there are no idle sessions in it. It should remain visible (empty) so the layout doesn't jump around and users always know where idle sessions will appear.","status":"closed","priority":3,"issue_type":"bug","owner":"markferree@gmail.com","created_at":"2026-02-04T17:17:28.840232159-08:00","created_by":"Mark Ferree","updated_at":"2026-02-04T17:28:52.732695242-08:00","closed_at":"2026-02-04T17:28:52.732695242-08:00","close_reason":"Pit lane now stays visible when empty"}
{"id":"agent-racer-akn","title":"Session reactivates after /exit command despite showing termination animation","description":"After a deliberate /exit command, the session correctly shows termination noise and animation, but then immediately pops back into active state instead of remaining terminated.\n\nExpected behavior:\n- /exit command marks session as terminal\n- Frontend shows termination animation\n- Session stays in terminated state\n\nActual behavior:\n- /exit command marks session as terminal\n- Frontend shows termination animation\n- Session becomes active again\n\nThis may be related to the stale session loop issue (tracked entry deletion → re-parse from offset 0 → 'new data' → reactivation), or it could be a separate issue where /exit doesn't properly mark the session in a way that prevents reactivation.\n\nInvestigate:\n- backend/monitor.go: how /exit is detected and handled\n- removedKeys map: is the session being added to prevent re-creation?\n- tracked map: is the file offset being preserved?\n- Session state transitions after terminal state","status":"closed","priority":1,"issue_type":"bug","owner":"markferree@gmail.com","created_at":"2026-02-07T15:29:12.766832199-08:00","created_by":"Mark Ferree","updated_at":"2026-02-13T08:55:45.23250542-08:00","closed_at":"2026-02-13T08:55:45.23250542-08:00","close_reason":"Fixed by c037804 (preserve tracked entries), 6f5f4d7 (exit hook stdin fix), and 785f7eb (zombie cleanup)"}
{"id":"agent-racer-b3d","title":"Regression tests: engine noise triggers across activity states","description":"Add tests verifying engine noise behavior across all activity transitions. Cover: (1) engine starts for thinking and tool_use activities, (2) engine starts with churning params when isChurning+idle/starting, (3) engine stops for waiting/complete/errored/lost, (4) rapid activity transitions don't drop audio prematurely, (5) engine sustains through brief gaps between thinking bursts (the suspected bug path for slow models). Test in frontend/src/audio/SoundEngine.test.js and/or frontend/src/canvas/RaceCanvas.test.js.","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-20T16:01:39.226172061-08:00","created_by":"Mark Ferree","updated_at":"2026-02-20T18:56:31.469748061-08:00","closed_at":"2026-02-20T18:56:31.469748061-08:00","close_reason":"Closed","dependencies":[{"issue_id":"agent-racer-b3d","depends_on_id":"agent-racer-22n","type":"blocks","created_at":"2026-02-20T16:01:43.545046406-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-b4l","title":"Harden JSONL reader for large/partial lines","description":"Replace bufio.Scanner with streaming reader (bufio.Reader) to avoid 1MB line cap, handle partial writes, and only advance offsets after fully parsed lines. Ensure no data loss when last line lacks newline.","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-01-31T16:31:28.894856803-08:00","created_by":"Mark Ferree","updated_at":"2026-02-02T09:54:08.880318787-08:00","closed_at":"2026-02-02T09:54:08.880318787-08:00","close_reason":"Implemented streaming bufio.Reader for large lines and partial writes. Added comprehensive tests. All tests pass."}
{"id":"agent-racer-bbx","title":"Bug: subagent accumulation causes thousands of hamsters","description":"mergeSubagents in monitor.go only appends/updates subagents, never removes them. Combined with the 'if len(update.Subagents) \u003e 0' guard (line 282), cleanup never runs on no-data polls. Over hundreds of polls, the state.Subagents slice grows unboundedly, and the frontend creates a Hamster entity for each one. Fix: make mergeSubagents always run and prune subagents that are no longer present in the parsed set or that have been terminal for longer than a threshold. Key files: backend/internal/monitor/monitor.go (mergeSubagents + call site), backend/internal/monitor/jsonl.go (ParseSessionJSONL).","status":"closed","priority":1,"issue_type":"bug","owner":"markferree@gmail.com","created_at":"2026-02-20T19:42:42.426096875-08:00","created_by":"Mark Ferree","updated_at":"2026-02-20T19:47:49.053253199-08:00","closed_at":"2026-02-20T19:47:49.053253199-08:00","close_reason":"Closed"}
{"id":"agent-racer-bfo","title":"Collapse empty pit area when no sessions parked","description":"The dashed-border PIT area takes significant vertical space even when empty. It should collapse to a thin strip or minimal indicator when no sessions are parked, and expand when sessions enter the pit.","status":"closed","priority":3,"issue_type":"feature","owner":"markferree@gmail.com","created_at":"2026-02-05T19:59:44.226659585-08:00","created_by":"Mark Ferree","updated_at":"2026-02-18T16:53:02.292729093-08:00","closed_at":"2026-02-18T16:53:02.292729093-08:00","close_reason":"Implemented collapsible pit area: empty pit collapses to thin dashed line indicator (14px vs 120px), expands when sessions enter"}
{"id":"agent-racer-bizo","title":"Security: Add HTTP security headers middleware","description":"server.go sets no security headers on HTTP responses. Add middleware that sets: X-Content-Type-Options: nosniff, X-Frame-Options: DENY, X-XSS-Protection: 1; mode=block, Content-Security-Policy (default-src 'self'). Apply to all responses via a wrapping handler.","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-23T09:37:07.861877841-08:00","created_by":"Mark Ferree","updated_at":"2026-02-23T17:46:14.170056593-08:00","closed_at":"2026-02-23T17:46:14.170056593-08:00","close_reason":"Closed"}
{"id":"agent-racer-bk4","title":"Utilize empty space below track and pit","description":"~60% of the viewport below the track/pit area is unused dark blue. Could show a session timeline, live log feed, aggregate stats dashboard, or a leaderboard. Major UX opportunity.","status":"closed","priority":2,"issue_type":"feature","owner":"markferree@gmail.com","created_at":"2026-02-05T19:59:38.473098601-08:00","created_by":"Mark Ferree","updated_at":"2026-02-07T12:45:41.980625095-08:00","closed_at":"2026-02-07T12:45:41.980625095-08:00","close_reason":"Added Dashboard.js with aggregate stats + leaderboard below track zones"}
{"id":"agent-racer-bkz","title":"Improve session name flag appearance and fix flagpole","description":"The session name flag doesn't look like a realistic flag. Redesign the flag shape to look more like an actual flag (e.g., pennant or banner shape) and fix the flagpole rendering so it connects properly.","status":"closed","priority":3,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-04T17:17:30.673563556-08:00","created_by":"Mark Ferree","updated_at":"2026-02-04T17:28:49.661993534-08:00","closed_at":"2026-02-04T17:28:49.661993534-08:00","close_reason":"Redesigned session flag and fixed flagpole rendering"}
{"id":"agent-racer-bn4","title":"Test flushRemovals and scheduleRemoval edge cases","description":"flushRemovals is at 0% coverage despite being critical to the zombie prevention chain. scheduleRemoval was the root cause of today's zombie bug (\u003c=0 vs \u003c0). Add tests for: (1) 0-duration schedules immediate removal, (2) negative duration skips scheduling, (3) flushRemovals removes from store and adds to removedKeys, (4) flushRemovals broadcasts removal IDs, (5) double-scheduling same session keeps earlier time.","status":"closed","priority":1,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-05T20:30:03.531108194-08:00","created_by":"Mark Ferree","updated_at":"2026-02-07T12:20:09.943940616-08:00","closed_at":"2026-02-07T12:20:09.943940616-08:00","close_reason":"Added tests for flushRemovals and scheduleRemoval edge cases"}
{"id":"agent-racer-bs8","title":"Tests: achievement engine","description":"Test each achievement condition: provide stats at threshold, verify unlock. Below-threshold stats: verify no unlock. Verify idempotence: already-unlocked achievements not re-emitted. Edge cases: simultaneous multi-unlock, zero stats, all achievements unlocked. Test each category has at least one test case. Files: backend/internal/gamification/achievements_test.go","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-18T16:33:28.413602872-08:00","created_by":"Mark Ferree","updated_at":"2026-02-22T13:14:31.214112688-08:00","closed_at":"2026-02-22T13:14:31.214112688-08:00","close_reason":"Merged to main","dependencies":[{"issue_id":"agent-racer-bs8","depends_on_id":"agent-racer-mi3","type":"blocks","created_at":"2026-02-18T16:33:31.756464723-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-bxk","title":"Add privacy/filter controls for session metadata","description":"Expose config/UI options to hide working directories/session IDs or filter which sessions are broadcast (e.g., allowlist/denylist by path) to reduce accidental data leakage.","status":"closed","priority":3,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-01-31T16:32:33.416855819-08:00","created_by":"Mark Ferree","updated_at":"2026-02-05T19:13:27.659036877-08:00","closed_at":"2026-02-05T19:13:27.659036877-08:00","close_reason":"Closed"}
{"id":"agent-racer-bxz","title":"FINISH text clips at top-right edge","description":"The 'FINISH' label near the right checkered flag overlaps with the pattern and gets cut off at the viewport edge. Needs positioning fix or overflow handling.","status":"closed","priority":3,"issue_type":"bug","owner":"markferree@gmail.com","created_at":"2026-02-05T19:59:29.189191051-08:00","created_by":"Mark Ferree","updated_at":"2026-02-05T20:11:45.586562899-08:00","closed_at":"2026-02-05T20:11:45.586562899-08:00","close_reason":"Moved checkerboard pattern, FINISH text, and flag icon to the left of the finish line to prevent clipping at viewport edge"}
{"id":"agent-racer-bzb","title":"Process activity detection: churning state feature","description":"Implement process activity monitoring so cars animate when Claude is actively processing (CPU/network activity) even before output appears. Gives visual feedback that work is happening and complements pit lane feature. See docs/process-activity-detection.md for full implementation plan.","status":"closed","priority":2,"issue_type":"feature","owner":"markferree@gmail.com","created_at":"2026-02-04T07:51:14.492834616-08:00","created_by":"Mark Ferree","updated_at":"2026-02-04T17:54:53.991823313-08:00","closed_at":"2026-02-04T17:54:53.991823313-08:00","close_reason":"All subtasks complete (hjs superseded 4hw, only dsc unit tests remain as separate issue)"}
{"id":"agent-racer-c3t","title":"Gamification \u0026 Rewards System","description":"Battle-pass-style achievements and cosmetic rewards system. Achievements unlock cosmetic rewards (car skins, trail effects, sounds) that make the racetrack more personal. Full plan: docs/GAMIFICATION-PLAN.md. Phases: (1) Stats Tracking + Persistence, (2) Permanent Achievements, (3) Cosmetic Rewards, (4) Battle Pass.","status":"open","priority":1,"issue_type":"epic","owner":"markferree@gmail.com","created_at":"2026-02-18T16:26:25.126386043-08:00","created_by":"Mark Ferree","updated_at":"2026-02-18T16:26:25.126386043-08:00"}
{"id":"agent-racer-c9h","title":"Phase 8: Integration, cleanup, and visual regression check","description":"CRITICAL: Phase 2 only created a bridge (plain canvas + Ticker), not a real PixiJS Application. Phase 8 must:\n1. Create the REAL PixiJS Application with WebGL (Application.init())\n2. Build the Container scene graph (trackContainer, racerContainer, etc.)\n3. Wire up the PixiJS renderers from phases 3-7 (TrackRenderer, RacerSprite, ParticleSystem)\n4. Integrate DashboardPanel (already DOM-based from Phase 7)\n5. Remove legacy Canvas 2D code and Phase 2 bridge\n6. Switch hit testing to PixiJS interaction\n7. Performance audit and visual regression check\n\nSee docs/pixi-migration.md Phase 8. After this is complete, Phase 6 (bloom) can be attempted.","status":"tombstone","priority":1,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-07T14:14:50.675262927-08:00","created_by":"Mark Ferree","updated_at":"2026-02-07T20:23:27.286967736-08:00","close_reason":"Phase 8 integration complete: Created real PixiJS Application with WebGL, built scene graph, wired all renderers, removed legacy Canvas 2D code","dependencies":[{"issue_id":"agent-racer-c9h","depends_on_id":"agent-racer-7bp","type":"blocks","created_at":"2026-02-07T14:15:00.234747898-08:00","created_by":"Mark Ferree"},{"issue_id":"agent-racer-c9h","depends_on_id":"agent-racer-eju","type":"blocks","created_at":"2026-02-07T14:15:00.629009886-08:00","created_by":"Mark Ferree"},{"issue_id":"agent-racer-c9h","depends_on_id":"agent-racer-ko4","type":"blocks","created_at":"2026-02-07T14:15:01.017848866-08:00","created_by":"Mark Ferree"},{"issue_id":"agent-racer-c9h","depends_on_id":"agent-racer-sda","type":"blocks","created_at":"2026-02-07T14:15:01.41410588-08:00","created_by":"Mark Ferree"},{"issue_id":"agent-racer-c9h","depends_on_id":"agent-racer-13l","type":"blocks","created_at":"2026-02-07T14:15:01.806729362-08:00","created_by":"Mark Ferree"}],"deleted_at":"2026-02-07T20:23:27.286967736-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"agent-racer-ca4","title":"Multi-agent docs + validation checklist","description":"Document supported CLIs, config options, and runbook. Add manual validation checklist for 1 session of each CLI. Depends on agent-racer-wtc/7jo/8cf.","notes":"Modularity: document how backend can be used with alternative UIs and how to add new sources without duplication.","status":"closed","priority":3,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-01-31T16:47:51.57741658-08:00","created_by":"Mark Ferree","updated_at":"2026-02-18T16:49:48.46787239-08:00","closed_at":"2026-02-18T16:49:48.46787239-08:00","close_reason":"Closed","dependencies":[{"issue_id":"agent-racer-ca4","depends_on_id":"agent-racer-wtc","type":"blocks","created_at":"2026-01-31T16:52:34.15878088-08:00","created_by":"Mark Ferree"},{"issue_id":"agent-racer-ca4","depends_on_id":"agent-racer-7jo","type":"blocks","created_at":"2026-01-31T16:52:46.498876478-08:00","created_by":"Mark Ferree"},{"issue_id":"agent-racer-ca4","depends_on_id":"agent-racer-8cf","type":"blocks","created_at":"2026-01-31T16:52:59.024253652-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-ci4","title":"Hit box shorter than limo car sprite","description":"After the car was stretched into a limo (d9556f8), HIT_RADIUS was updated to 100px in RaceCanvas.js but the clickable bounding box doesn't cover the full length of the car. Clicking on the front or rear of the limo doesn't open the flyout — only clicks near the center register. The hit test uses a circular radius from displayX/displayY (center point) but the car is now elongated horizontally, so a rectangular or elliptical hit area may be needed instead.","status":"closed","priority":2,"issue_type":"bug","owner":"markferree@gmail.com","created_at":"2026-02-13T15:07:51.019550122-08:00","created_by":"Mark Ferree","updated_at":"2026-02-18T16:48:40.343138111-08:00","closed_at":"2026-02-18T16:48:40.343138111-08:00","close_reason":"Replaced circular HIT_RADIUS with rectangular hitbox (HIT_LEFT/RIGHT/TOP/BOTTOM) matching limo dimensions"}
{"id":"agent-racer-cqr","title":"Show key metrics near car without clicking","description":"Token count, elapsed time, and context % are only visible in the flyout. Display key numbers (e.g. '37K/200K' or '18%') near or above the car sprite so users get at-a-glance progress without clicking.","status":"closed","priority":2,"issue_type":"feature","owner":"markferree@gmail.com","created_at":"2026-02-05T19:59:41.887990406-08:00","created_by":"Mark Ferree","updated_at":"2026-02-07T12:45:23.847279507-08:00","closed_at":"2026-02-07T12:45:23.847279507-08:00","close_reason":"Added metrics pill above car sprites showing context %, token count, and elapsed time"}
{"id":"agent-racer-czq","title":"Exit hook in Claude Code not working or installation issue","description":"The exit hook in Claude Code is supposed to notify the screen that the session is done and remove the car from the display, but it's either not executing properly or there's an installation/configuration issue preventing it from working.","status":"closed","priority":2,"issue_type":"bug","owner":"markferree@gmail.com","created_at":"2026-02-02T12:20:59.359467889-08:00","created_by":"Mark Ferree","updated_at":"2026-02-04T11:37:51.146034315-08:00","closed_at":"2026-02-04T11:37:51.146034315-08:00","close_reason":"Fixed: the hook script used python3 - \u003c\u003cheredoc which consumed stdin before json.load(sys.stdin) could read the Claude Code JSON payload. Changed to python3 -c to pass script via CLI arg, keeping stdin free. Also added transcript_id fallback for session matching."}
{"id":"agent-racer-dac","title":"Set up frontend test infrastructure (Vitest)","description":"Add Vitest to frontend/. Create package.json with vitest as dev dependency, vitest.config.js with ESM support, and a test script. Add a trivial smoke test to verify the harness works. Do NOT add tests for any application modules — just the infrastructure.","status":"closed","priority":1,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-07T20:28:22.130992235-08:00","created_by":"Mark Ferree","updated_at":"2026-02-13T08:45:02.974156976-08:00","closed_at":"2026-02-13T08:45:02.974156976-08:00","close_reason":"Vitest infrastructure already present on main (package.json, vitest.config.js, smoke test)"}
{"id":"agent-racer-ddt","title":"Use JSONL timestamps for LastActivityAt","description":"Monitor currently sets LastActivityAt to time.Now() on every poll. Instead, use the parsed JSONL entry timestamp (RFC3339) so the UI reflects real activity times.","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-01-31T16:32:07.681683558-08:00","created_by":"Mark Ferree","updated_at":"2026-02-01T16:13:46.494330887-08:00","closed_at":"2026-02-01T16:13:46.494330887-08:00","close_reason":"Addressed in monitor refactor: classifyActivityFromUpdate uses update.LastTime from parsed JSONL timestamps, only falling back to time.Now() when no timestamp is available."}
{"id":"agent-racer-demj","title":"Detect and track context compaction events","description":"Add the ability to detect when a Claude Code session undergoes context compaction and surface that in the session state. Compaction is when the conversation history gets compressed as it approaches context limits — this is a meaningful lifecycle event that could affect session activity classification, debugging, and gamification (e.g. achievements for long-running sessions). Need to investigate what signal compaction leaves in the JSONL stream and how to propagate it through the monitor pipeline.","status":"closed","priority":2,"issue_type":"feature","owner":"markferree@gmail.com","created_at":"2026-02-22T13:15:28.233017801-08:00","created_by":"Mark Ferree","updated_at":"2026-02-23T17:20:16.826890159-08:00","closed_at":"2026-02-23T17:20:16.826890159-08:00","close_reason":"Implemented compaction event detection. Parser recognizes type:system subtype:compact_boundary entries and threads CompactionCount through ParseResult → SourceUpdate → SessionState. Full test coverage with 4 subtests."}
{"id":"agent-racer-dff","title":"Gemini model shows 'unknown' instead of model name","description":"When Gemini is selected as the current model, the car label displays 'unknown' instead of showing the actual model name 'Gemini'.","status":"closed","priority":4,"issue_type":"bug","owner":"markferree@gmail.com","created_at":"2026-02-02T12:16:51.831823652-08:00","created_by":"Mark Ferree","updated_at":"2026-02-05T19:13:27.635217058-08:00","closed_at":"2026-02-05T19:13:27.635217058-08:00","close_reason":"Closed"}
{"id":"agent-racer-dkv","title":"Detect context window size from Gemini session data","description":"Gemini models have context windows ranging from 32k to 1M+ tokens depending on model and configuration. Static config entries are unreliable. Investigate: (1) whether session JSON or usageMetadata includes a context limit field, (2) whether settings.json or CLI args expose the configured model's context size, (3) whether the Gemini API model metadata endpoint can be queried. Update GeminiSource to surface actual context ceiling. Current hardcoded 1M default causes race progress bars to appear nearly empty for short sessions.","status":"closed","priority":1,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-01T17:37:19.885493003-08:00","created_by":"Mark Ferree","updated_at":"2026-02-01T17:58:58.191060088-08:00","closed_at":"2026-02-01T17:58:58.191060088-08:00","close_reason":"Added geminiContextWindow() model-name lookup mirroring CLI tokenLimits.ts. Sets MaxContextTokens from model name.","dependencies":[{"issue_id":"agent-racer-dkv","depends_on_id":"agent-racer-5mr","type":"blocks","created_at":"2026-02-01T17:37:43.079839708-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-dsc","title":"Testing: Process activity detection unit tests","description":"Write unit tests for ProcessActivity.IsChurning() covering high CPU, TCP connections, idle states. Add integration tests for monitor polling.","status":"closed","priority":3,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-04T07:51:25.806728432-08:00","created_by":"Mark Ferree","updated_at":"2026-02-05T19:13:27.623818296-08:00","closed_at":"2026-02-05T19:13:27.623818296-08:00","close_reason":"Closed","dependencies":[{"issue_id":"agent-racer-dsc","depends_on_id":"agent-racer-bzb","type":"discovered-from","created_at":"2026-02-04T07:51:25.808544377-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-e3y","title":"Detect context window size from Codex session data","description":"Codex models have variable context windows (o3: 200k, o4-mini: 200k, gpt-5-codex: unknown, etc.) and new models ship frequently. Static config.yaml entries go stale fast. Investigate: (1) whether Codex rollout files or token_count events include a max_context or model_context_length field, (2) whether the OpenAI API model metadata can be queried at startup, (3) fallback: use the cumulative token count high-water mark as a floor estimate. Update CodexSource.Parse to surface the context ceiling if available, or add a model-metadata lookup at source init time.","status":"closed","priority":1,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-01T17:37:13.202275104-08:00","created_by":"Mark Ferree","updated_at":"2026-02-01T17:58:57.743225527-08:00","closed_at":"2026-02-01T17:58:57.743225527-08:00","close_reason":"Extracts model_context_window from Codex turn_started and token_count events. Updated config fallbacks.","dependencies":[{"issue_id":"agent-racer-e3y","depends_on_id":"agent-racer-5mr","type":"blocks","created_at":"2026-02-01T17:37:37.543092774-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-e8z","title":"Fix 3 failing racer-flyout E2E tests","description":"Three tests in e2e/tests/racer-flyout.spec.ts fail consistently:\n\n1. 'clicking the close button dismisses the flyout' — #flyout-close element is never stable (animation causes constant repositioning), then flyout not visible on retry\n2. 'flyout stays within viewport bounds' — flyout extends 16-40px beyond viewport (736/760 vs 720 expected)\n3. 'flyout displays all expected detail fields' — expects .label elements with text 'Started' but none found in DOM\n\nThese appear to be test assumptions that don't match the actual frontend DOM/behavior. Either fix the tests to match reality or fix the frontend flyout clamping.","status":"closed","priority":2,"issue_type":"bug","owner":"markferree@gmail.com","created_at":"2026-02-13T14:07:09.31916583-08:00","created_by":"Mark Ferree","updated_at":"2026-02-13T14:58:51.76885174-08:00","closed_at":"2026-02-13T14:58:51.76885174-08:00","close_reason":"Cherry-picked fix: flyout viewport clamping in main.js, updated E2E selectors and helpers. All 8 racer-flyout tests passing."}
{"id":"agent-racer-eev","title":"Animate hammer hitting car hood during tool use","description":"When Claude shows tool use, animate a hammer hitting the hood of the car to provide visual feedback that the agent is actively working/using tools","status":"closed","priority":2,"issue_type":"feature","owner":"markferree@gmail.com","created_at":"2026-02-02T17:14:55.796975994-08:00","created_by":"Mark Ferree","updated_at":"2026-02-02T17:18:27.071961492-08:00","closed_at":"2026-02-02T17:18:27.071961492-08:00","close_reason":"Implemented hammer animation on tool use with the following features:\n\n1. Hammer state tracking (hammerSwing, hammerActive, hammerImpactEmitted) added to Racer class\n2. Animation triggers automatically when activity transitions to 'tool_use'\n3. Smooth swing animation using easeInOutQuad for natural motion (-70° raised to 0° impact)\n4. Visual hammer with wooden handle and metallic head, positioned above car hood\n5. Impact effects: spark particles emitted at impact point (hammerSwing ~0.5)\n6. Suspension bounce when hammer hits the hood for tactile feedback\n7. Motion blur effect during fast swing for extra visual polish\n8. Continuous animation loop while in tool_use state\n9. Animation stops cleanly when transitioning to other activities\n\nImplementation details:\n- Hammer pivot point: 10*S units ahead of car, 18*S units above\n- Swing speed: 0.08 per frame (adjustable)\n- Impact particles: 3 sparks at hood location\n- Suspension impact: 1.8 spring velocity added on hit\n\nThe hammer provides clear visual feedback when Claude is using tools, making it obvious when the agent is actively working."}
{"id":"agent-racer-eih","title":"Make cars larger and add side decals with model + directory","description":"Enhancement: increase car size and render the model name + working directory on the side of the car (racing team/advertisement style), instead of only above. Ensure layout remains readable.","status":"closed","priority":3,"issue_type":"feature","owner":"markferree@gmail.com","created_at":"2026-02-01T18:15:50.522348734-08:00","created_by":"Mark Ferree","updated_at":"2026-02-02T12:26:53.569458322-08:00","closed_at":"2026-02-02T12:26:53.569458322-08:00","close_reason":"Scaled cars to 2.3x, replaced floating labels with side decals (session name + working dir behind car, model name on body)"}
{"id":"agent-racer-eitg","title":"Architecture: Add source health tracking and failure warnings","description":"When a source's Discover() or Parse() fails, the error is logged but the source is silently skipped (monitor.go:135). Users see racers vanish with no explanation. Track consecutive failures per source and emit a warning/dashboard alert after N failures (e.g., 3). Consider a circuit breaker pattern.","status":"closed","priority":2,"issue_type":"feature","owner":"markferree@gmail.com","created_at":"2026-02-23T09:37:06.041753407-08:00","created_by":"Mark Ferree","updated_at":"2026-02-23T17:34:31.579433691-08:00","closed_at":"2026-02-23T17:34:31.579433691-08:00","close_reason":"Implemented per-source health tracking with consecutive failure counting, WS alerts on status transitions, snapshot health payloads, and full test coverage"}
{"id":"agent-racer-eju","title":"Phase 4: Port Racer entity to PixiJS Container","description":"Port Racer.js (1,134 lines) to PixiJS Container with child Graphics. Car body polygon, wheels, all 7 activity states, spring physics, zone transitions, labels. Largest migration unit. See docs/pixi-migration.md Phase 4.","status":"tombstone","priority":1,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-07T14:14:49.048503624-08:00","created_by":"Mark Ferree","updated_at":"2026-02-07T20:23:27.286967736-08:00","close_reason":"Merged to main","dependencies":[{"issue_id":"agent-racer-eju","depends_on_id":"agent-racer-9ft","type":"blocks","created_at":"2026-02-07T14:14:58.662495616-08:00","created_by":"Mark Ferree"}],"deleted_at":"2026-02-07T20:23:27.286967736-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"agent-racer-esy","title":"Frontend: Modularize main.js per refactor plan","description":"Implement the frontend refactor plan from docs/FRONTEND-REFACTOR-PLAN.md. Extract formatters.js, detailFlyout.js, sessionTracker.js, and ambientAudio.js from main.js. Reduce main.js to orchestration code. Run existing tests to validate behavior after each extraction.","status":"closed","priority":3,"issue_type":"feature","owner":"markferree@gmail.com","created_at":"2026-02-20T19:31:04.322452914-08:00","created_by":"Mark Ferree","updated_at":"2026-02-23T19:33:18.802287546-08:00","closed_at":"2026-02-23T19:33:18.802287546-08:00","close_reason":"Closed"}
{"id":"agent-racer-evc","title":"Phase 2+3: Frontend Hamster Entity + Tow Rope","description":"Create Hamster.js entity with skateboard, hamster body, activity indicators, spring physics, wheel spin, ear/tail animations. Add drawTowRope method to Racer.js with quadratic bezier, rope snap on completion. See docs/SUBAGENT-PLAN.md Phases 2-3.","status":"closed","priority":1,"issue_type":"feature","owner":"markferree@gmail.com","created_at":"2026-02-20T15:23:33.473875937-08:00","created_by":"Mark Ferree","updated_at":"2026-02-20T15:34:33.601098961-08:00","closed_at":"2026-02-20T15:34:33.601098961-08:00","close_reason":"Implemented Phase 2 (Hamster.js entity) and Phase 3 (drawTowRope in Racer.js)","dependencies":[{"issue_id":"agent-racer-evc","depends_on_id":"agent-racer-fx8","type":"blocks","created_at":"2026-02-20T15:23:52.252869224-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-ewr","title":"Token normalization strategy for non-usage CLIs","description":"Define config + logic for agents without true usage counts (estimate tokens, message-count heuristic, label as estimated). Depends on research issues and multi-source aggregation.","notes":"Modularity: token normalization should be backend-only config/logic, not UI-specific; expose a clean field so alternate GUIs can reuse.","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-01-31T16:47:38.886500065-08:00","created_by":"Mark Ferree","updated_at":"2026-02-04T17:25:57.369074077-08:00","closed_at":"2026-02-04T17:25:57.369074077-08:00","close_reason":"Implemented token normalization: per-source strategy config, estimation fallback from message count, tokenEstimated field for GUIs","dependencies":[{"issue_id":"agent-racer-ewr","depends_on_id":"agent-racer-wtc","type":"blocks","created_at":"2026-01-31T16:51:54.064657049-08:00","created_by":"Mark Ferree"},{"issue_id":"agent-racer-ewr","depends_on_id":"agent-racer-7jo","type":"blocks","created_at":"2026-01-31T16:52:07.800068455-08:00","created_by":"Mark Ferree"},{"issue_id":"agent-racer-ewr","depends_on_id":"agent-racer-8cf","type":"blocks","created_at":"2026-01-31T16:52:21.494416647-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-f355","title":"Architecture: Stop broadcaster snapshot ticker on shutdown","description":"broadcast.go — snapshotTicker created in NewBroadcaster() is never explicitly stopped. On server shutdown this leaks a goroutine. Add .Stop() call in a cleanup/shutdown method. Minor issue since it's cleaned up on process exit, but good hygiene for graceful shutdown support.","status":"closed","priority":4,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-23T09:37:34.680434591-08:00","created_by":"Mark Ferree","updated_at":"2026-02-23T19:14:06.477429163-08:00","closed_at":"2026-02-23T19:14:06.477429163-08:00","close_reason":"Closed"}
{"id":"agent-racer-fpb","title":"Car shadow ellipse too short for limo body","description":"The drop shadow under the car (Racer.js:490-495) uses a hardcoded ellipse radius of 18*CAR_SCALE (~41px), but the limo body spans from -(17+LIMO_STRETCH) to +23 in local coords — a total of 75*CAR_SCALE (~173px). The shadow is less than half the car's actual length.\n\n**Current code (line 494):**\n```js\nctx.ellipse(x + 2, y + 12 * S, 18 * S, 3 * S, 0, 0, Math.PI * 2);\n```\n\n**Fix:** Derive the shadow x-radius from the actual car geometry, e.g. `(17 + LIMO_STRETCH + 23) / 2 * S` to cover the full limo length, and center it accordingly.\n\n**Key file:** frontend/src/entities/Racer.js:490-495","status":"closed","priority":2,"issue_type":"bug","owner":"markferree@gmail.com","created_at":"2026-02-18T17:04:37.144379289-08:00","created_by":"Mark Ferree","updated_at":"2026-02-18T17:20:15.906843675-08:00","closed_at":"2026-02-18T17:20:15.906843675-08:00","close_reason":"Shadow ellipse now derives x-radius from actual limo geometry"}
{"id":"agent-racer-fx8","title":"Subagent Visualization: Hamsters on Skateboards","description":"Parse type:progress JSONL entries and render subagents as hamsters on skateboards towed behind parent cars. See docs/SUBAGENT-PLAN.md for full design.","status":"closed","priority":1,"issue_type":"epic","owner":"markferree@gmail.com","created_at":"2026-02-20T15:23:25.365192819-08:00","created_by":"Mark Ferree","updated_at":"2026-02-20T15:24:00.751833976-08:00","closed_at":"2026-02-20T15:24:00.751833976-08:00","close_reason":"Epic opened; phases created with dependencies"}
{"id":"agent-racer-g27","title":"Frontend: Paint overrides in Racer.js","description":"Override getModelColor() in Racer.js when paint cosmetic is equipped. Paint definitions: Matte Black (#1a1a1a), Chrome (metallic gradient), Gemini Teal (#00bcd4), Codex Green (#4caf50), Deep Purple (#673ab7), Electric Blue (#2196f3), Lime Green (#8bc34a), Endurance Orange (#ff9800), Racing Stripe (base + white stripe), Gold Stripe (base + gold stripe), Chrome, Holographic (animated hue shift), season colors. Files: frontend/src/entities/Racer.js","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-18T16:34:47.81530752-08:00","created_by":"Mark Ferree","updated_at":"2026-02-23T19:18:02.926338208-08:00","closed_at":"2026-02-23T19:18:02.926338208-08:00","close_reason":"Closed","dependencies":[{"issue_id":"agent-racer-g27","depends_on_id":"agent-racer-pk3","type":"blocks","created_at":"2026-02-18T16:34:51.219469121-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-gef","title":"Implement TMUX-PLAN.md","description":"Implements tmux focus support. Note: multi-agent work introduces new sources + agent types; this tmux feature should target Claude only unless extended.","status":"closed","priority":3,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-01-31T16:04:52.795808114-08:00","created_by":"Mark Ferree","updated_at":"2026-02-04T17:33:26.405199233-08:00","closed_at":"2026-02-04T17:33:26.405199233-08:00","close_reason":"Implemented tmux focus support: TmuxResolver, focus endpoint, hover/click UI, tests"}
{"id":"agent-racer-gjy","title":"Rename dashboard title from Claude to Agent","description":"Header says 'CLAUDE RACING DASHBOARD' but the app now supports Claude, Codex, and Gemini sources. Rename to 'AGENT RACING DASHBOARD' or 'RACING DASHBOARD' to be source-agnostic.","status":"closed","priority":2,"issue_type":"bug","owner":"markferree@gmail.com","created_at":"2026-02-05T19:59:27.395813723-08:00","created_by":"Mark Ferree","updated_at":"2026-02-05T20:11:51.672733269-08:00","closed_at":"2026-02-05T20:11:51.672733269-08:00","close_reason":"Renamed all references from Claude Racing Dashboard to Agent Racing Dashboard"}
{"id":"agent-racer-gv2","title":"Migrate frontend to PixiJS v8","description":"Replace vanilla Canvas 2D rendering with PixiJS v8. See docs/pixi-migration.md for full plan.","status":"tombstone","priority":1,"issue_type":"epic","owner":"markferree@gmail.com","created_at":"2026-02-07T14:14:22.444598272-08:00","created_by":"Mark Ferree","updated_at":"2026-02-07T14:15:15.045144968-08:00","deleted_at":"2026-02-07T14:15:15.045144968-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"epic"}
{"id":"agent-racer-gyg","title":"E2E: clicking racer opens detail flyout","description":"Playwright E2E test. Click on a racer car on the canvas, verify the detail flyout panel appears with session info (ID, model, activity, tokens, working dir). Click elsewhere or press ESC to dismiss. Verify flyout stays within viewport bounds. Use browser_click at racer coordinates and browser_snapshot to verify flyout DOM.","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-07T20:32:39.503408708-08:00","created_by":"Mark Ferree","updated_at":"2026-02-13T08:49:43.351011625-08:00","closed_at":"2026-02-13T08:49:43.351011625-08:00","close_reason":"Merged Playwright E2E test for racer detail flyout (open, dismiss, viewport bounds)"}
{"id":"agent-racer-gzl","title":"WS event: achievement_unlocked","description":"Wire AchievementEngine output into WebSocket broadcaster. New message type 'achievement_unlocked' with payload: {id, name, description, tier, reward: {type, id, name}}. Broadcast to all connected clients when achievement unlocks. Files: backend/internal/gamification/achievements.go, WebSocket broadcaster","status":"closed","priority":1,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-18T16:32:56.285190277-08:00","created_by":"Mark Ferree","updated_at":"2026-02-22T13:14:31.19807973-08:00","closed_at":"2026-02-22T13:14:31.19807973-08:00","close_reason":"Merged to main","dependencies":[{"issue_id":"agent-racer-gzl","depends_on_id":"agent-racer-mi3","type":"blocks","created_at":"2026-02-18T16:32:59.772634424-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-hjs","title":"Add macOS process detection using gopsutil","description":"Replace Linux-specific /proc-based process detection with gopsutil for cross-platform support.\n\n**Problem:** Current process.go uses /proc which doesn't exist on macOS. Churning detection is completely broken on darwin.\n\n**Solution:**\n- Add github.com/shirou/gopsutil/v3 dependency\n- Refactor DiscoverProcessActivity() to use gopsutil's process package\n- Use process.Processes() to list processes\n- Use p.Cmdline(), p.Cwd(), p.CPUPercent() for detection\n- Remove /proc-specific code or gate it behind build tags\n\n**Key functions to replace:**\n- DiscoverProcessActivity() - use gopsutil process iteration\n- parseCPUTicks() - use gopsutil CPUPercent()\n- countEstablishedTCP() - use gopsutil Connections() or net package\n\n**Files:**\n- backend/internal/monitor/process.go\n- go.mod (add gopsutil dependency)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-04T15:20:17.671792-08:00","created_by":"mark.ferree","updated_at":"2026-02-04T17:22:36.684959518-08:00","closed_at":"2026-02-04T17:22:36.684959518-08:00","close_reason":"Refactored process detection from /proc to gopsutil v3 for cross-platform support"}
{"id":"agent-racer-if1","title":"Test Track layout calculations (bounds, lanes, positions)","description":"Unit tests for canvas/Track.js layout math. Cover getTrackBounds/getPitBounds/getParkingLotBounds, getLaneY, getPositionX mapping context utilization to X pixel, cache invalidation on dimension changes. Pure math - no canvas rendering needed.","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-07T20:29:53.583996458-08:00","created_by":"Mark Ferree","updated_at":"2026-02-13T14:06:58.462638974-08:00","closed_at":"2026-02-13T14:06:58.462638974-08:00","close_reason":"Track.test.js (317 lines, 48 tests) merged via test-racer branch","dependencies":[{"issue_id":"agent-racer-if1","depends_on_id":"agent-racer-dac","type":"blocks","created_at":"2026-02-07T20:30:18.712874646-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-iiz","title":"Season config + rotation","description":"Config fields: gamification.battle_pass.season (string e.g. '2025-07'), gamification.battle_pass.enabled (bool, default false initially). On season change: archive old season stats, reset XP + tier to 0, keep permanent achievements intact. Season tier rewards defined per season. Manual rotation via config change initially, automatic monthly rotation later. Files: config/config.go, backend/internal/gamification/battlepass.go","status":"closed","priority":3,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-18T16:37:15.458894147-08:00","created_by":"Mark Ferree","updated_at":"2026-02-23T19:51:11.949152532-08:00","closed_at":"2026-02-23T19:51:11.949152532-08:00","close_reason":"Closed","dependencies":[{"issue_id":"agent-racer-iiz","depends_on_id":"agent-racer-ykn","type":"blocks","created_at":"2026-02-18T16:37:19.114417523-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-ijm","title":"REST endpoint: POST /api/equip","description":"Equip a cosmetic reward. Request: {slot: 'paint'|'trail'|'body'|'badge'|'sound'|'title', rewardId: string}. Validates reward is unlocked, updates equipped state, persists to stats.json. Returns updated loadout. Broadcasts equipped change via WebSocket so frontend updates live.","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-18T16:34:30.325348807-08:00","created_by":"Mark Ferree","updated_at":"2026-02-22T13:14:31.209643446-08:00","closed_at":"2026-02-22T13:14:31.209643446-08:00","close_reason":"Merged to main","dependencies":[{"issue_id":"agent-racer-ijm","depends_on_id":"agent-racer-07y","type":"blocks","created_at":"2026-02-18T16:34:33.998681568-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-iu7","title":"Improve session file selection \u0026 multi-session support","description":"Superseded by agent-racer-5wh (FILE-SESSION-PLAN.md). That plan replaces PID scanning and fixes multi-session selection, so this issue is redundant.","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-01-31T16:31:42.315070143-08:00","created_by":"Mark Ferree","updated_at":"2026-01-31T16:36:12.548136125-08:00","closed_at":"2026-01-31T16:36:12.548136125-08:00","close_reason":"Closed"}
{"id":"agent-racer-iuu","title":"Haiku model shows 'CLAUDE' instead of model name on car label","description":"When the Haiku model is selected, the car label displays 'CLAUDE' in all caps instead of showing the actual model name (e.g., 'Haiku'). This affects the UI display/readability.","status":"closed","priority":2,"issue_type":"bug","owner":"markferree@gmail.com","created_at":"2026-02-02T09:39:57.96808213-08:00","created_by":"Mark Ferree","updated_at":"2026-02-02T17:10:30.904457783-08:00","closed_at":"2026-02-02T17:10:30.904457783-08:00","close_reason":"Added claude-haiku-4-5-20251001 to MODEL_COLORS mapping","dependencies":[{"issue_id":"agent-racer-iuu","depends_on_id":"agent-racer-2w0","type":"blocks","created_at":"2026-02-02T09:41:52.644462299-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-j3y","title":"E2E: keyboard shortcuts (debug, mute, fullscreen)","description":"Playwright E2E test. Verify keyboard shortcuts: D toggles debug panel visibility, M toggles mute state, F toggles fullscreen, ESC closes flyout if open. Use browser_press_key and browser_snapshot to verify state changes after each keypress.","status":"closed","priority":3,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-07T20:32:41.661846248-08:00","created_by":"Mark Ferree","updated_at":"2026-02-13T14:07:00.126753844-08:00","closed_at":"2026-02-13T14:07:00.126753844-08:00","close_reason":"Merged keyboard-shortcuts.spec.ts + helpers.ts (152 lines, 4 tests)"}
{"id":"agent-racer-j6n","title":"Test main.js session state management and flyout positioning","description":"Unit tests for src/main.js. Cover flyout anchor selection and boundary clamping, session appear/disappear detection, SFX debounce (3s cooldown), session count calculation. Requires DOM mocking.","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-07T20:30:08.093972931-08:00","created_by":"Mark Ferree","updated_at":"2026-02-13T14:06:57.639175586-08:00","closed_at":"2026-02-13T14:06:57.639175586-08:00","close_reason":"Merged main.test.js (477 lines, 27 tests with jsdom)","dependencies":[{"issue_id":"agent-racer-j6n","depends_on_id":"agent-racer-dac","type":"blocks","created_at":"2026-02-07T20:30:20.719676029-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-jhl","title":"Add agent type to session state + UI badges","description":"Add AgentType field to SessionState (claude/codex/gemini). Update frontend rendering to show badges/colors and optionally filter by agent type. Depends on multi-source work (agent-racer-8cf).","notes":"Backend Source field added to SessionState in monitor refactor. Remaining work: frontend badge/color rendering and agent type filtering.","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-01-31T16:47:25.98119752-08:00","created_by":"Mark Ferree","updated_at":"2026-02-04T17:21:11.090706784-08:00","closed_at":"2026-02-04T17:21:11.090706784-08:00","close_reason":"Added source badges on car canvas (colored circle with C/X/G letter on hood) and detail panel (colored pill badge). Mock generator now includes codex and gemini sessions.","dependencies":[{"issue_id":"agent-racer-jhl","depends_on_id":"agent-racer-8cf","type":"blocks","created_at":"2026-01-31T16:51:41.633828393-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-ju2","title":"E2E: session lifecycle (appear, animate, pit, parking lot)","description":"Playwright E2E test. Verify visual lifecycle: new session appears on track with appear animation, idle session moves to pit area after staleness threshold, completed/errored session moves to parking lot. Use browser_take_screenshot at each stage and browser_evaluate to check racer zone assignments.","status":"closed","priority":3,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-07T20:32:45.661070735-08:00","created_by":"Mark Ferree","updated_at":"2026-02-13T14:06:59.710030281-08:00","closed_at":"2026-02-13T14:06:59.710030281-08:00","close_reason":"Merged session-lifecycle.spec.ts (250 lines, 5 tests)"}
{"id":"agent-racer-k17","title":"Extract cwd from Claude JSONL entries for correct working dir","description":"The JSONL parser never read the cwd field from Claude Code entries. Working directory was derived solely from the filesystem path (project directory name). Worktree sessions write to ~/.claude/projects/-home-mrf/ causing all cars to show 'mrf' as their pennant name. Fix: extract cwd from JSONL entries (using latest value) and pass it through as WorkingDir. Includes regression test.","status":"closed","priority":1,"issue_type":"bug","owner":"markferree@gmail.com","created_at":"2026-02-05T20:16:34.795383146-08:00","created_by":"Mark Ferree","updated_at":"2026-02-05T20:16:57.917064735-08:00","closed_at":"2026-02-05T20:16:57.917064735-08:00","close_reason":"Fixed - parser now extracts cwd field, with regression tests"}
{"id":"agent-racer-k4c","title":"Frontend tests: Hamster entity","description":"Add JS tests for Hamster entity: spring physics, lerp, activity transitions, tow rope rendering, fan positioning, completion fade. npm test in frontend/.","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-20T15:23:44.626656328-08:00","created_by":"Mark Ferree","updated_at":"2026-02-20T15:51:13.492267205-08:00","closed_at":"2026-02-20T15:51:13.492267205-08:00","close_reason":"Closed","dependencies":[{"issue_id":"agent-racer-k4c","depends_on_id":"agent-racer-evc","type":"blocks","created_at":"2026-02-20T15:23:54.431425632-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-k5q","title":"Create configuration file using .config standard directory mainly control sounds in v1","status":"closed","priority":3,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-01-31T16:07:19.330009543-08:00","created_by":"Mark Ferree","updated_at":"2026-02-02T10:07:48.592576514-08:00","closed_at":"2026-02-02T10:07:48.592576514-08:00","close_reason":"Implemented XDG config support for sound settings. Added /api/config endpoint, frontend config loading, volume controls, and documentation."}
{"id":"agent-racer-kfb","title":"Session info popup should follow car position","description":"The session info popup window doesn't track the car as it moves along the track. The popup should stick to the car with its arrow pointing at the car, updating position as the car animates. Currently the popup stays in a fixed position and disconnects from the car visually.","status":"closed","priority":2,"issue_type":"bug","owner":"markferree@gmail.com","created_at":"2026-02-04T17:31:14.985124509-08:00","created_by":"Mark Ferree","updated_at":"2026-02-04T17:48:30.556541036-08:00","closed_at":"2026-02-04T17:48:30.556541036-08:00","close_reason":"Popup now follows car position with arrow pointing at car"}
{"id":"agent-racer-knw","title":"Intermittent bug: dash in directory name translates to slash in Working Dir","description":"There's an intermittent bug where a dash (-) character in a directory name is being translated to a forward slash (/) in the Working Dir display. This appears to be a path handling or string transformation issue.","status":"closed","priority":2,"issue_type":"bug","owner":"markferree@gmail.com","created_at":"2026-02-02T12:31:51.266062183-08:00","created_by":"Mark Ferree","updated_at":"2026-02-02T17:06:23.284522475-08:00","closed_at":"2026-02-02T17:06:23.284522475-08:00","close_reason":"Fixed DecodeProjectPath to handle dashes in directory names correctly by trying multiple decoding strategies"}
{"id":"agent-racer-ko4","title":"Phase 5: Port Particle system to PixiJS","description":"Replace custom Particles.js with PixiJS Graphics-based particle pool. Port all 8 presets (exhaust, sparks, smoke, confetti, speedLines, celebration, skidMarks). Two render layers (behind/front). See docs/pixi-migration.md Phase 5.","status":"tombstone","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-07T14:14:49.455025589-08:00","created_by":"Mark Ferree","updated_at":"2026-02-07T20:23:27.286967736-08:00","close_reason":"Merged to main","dependencies":[{"issue_id":"agent-racer-ko4","depends_on_id":"agent-racer-9ft","type":"blocks","created_at":"2026-02-07T14:14:59.051972714-08:00","created_by":"Mark Ferree"}],"deleted_at":"2026-02-07T20:23:27.286967736-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"agent-racer-ky7","title":"Differentiate completion vs crash/lost sessions","description":"Monitor currently marks any disappeared process as Complete. Add logic to detect abrupt exits and mark Lost/Errored (e.g., no recent assistant response, file parse errors, or exit without 'assistant' completion signals). Update UI/sound to reflect true failure states.","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-01-31T16:31:55.210737792-08:00","created_by":"Mark Ferree","updated_at":"2026-02-02T10:06:14.011047364-08:00","closed_at":"2026-02-02T10:06:14.011047364-08:00","close_reason":"Implemented differentiation between completion, error, and lost session states. Sessions now properly marked as:\n- Complete: when session end marker indicates success\n- Errored: when session end marker contains error indicators (error, crash, failed, etc.)\n- Lost: when session disappears without end marker (stale/timeout)\n\nUpdated backend monitor logic, frontend UI handling, and notification messages. Added comprehensive test coverage."}
{"id":"agent-racer-kzw","title":"Gemini sessions repeatedly re-tracked","description":"Monitor logs show repeated '[gemini] Tracking new session: 4e87e3cc' every second for a single session, indicating Gemini sessions are being treated as new each poll. Example log (2026-02-01 17:53:11-15): repeated Tracking new session entries for same session ID. Likely issue in Gemini source discovery/offset handling causing duplicate tracking.","status":"closed","priority":1,"issue_type":"bug","owner":"markferree@gmail.com","created_at":"2026-02-01T17:54:28.432515714-08:00","created_by":"Mark Ferree","updated_at":"2026-02-02T10:03:33.857638322-08:00","closed_at":"2026-02-02T10:03:33.857638322-08:00","close_reason":"Fixed offset handling in gemini_source.go Parse() to return current mtime when skipping unchanged files, preventing re-tracking bug"}
{"id":"agent-racer-lil","title":"Session info popup moves chaotically and loses track of car","description":"The session metadata flyout/popup window does not reliably point at or follow the car it belongs to. It moves around chaotically and loses association with its car during animation. The previous fix (agent-racer-kfb) attempted to make the popup follow the car but the result is unstable.\n\nNeeds research into the root cause before fixing -- likely coordinate transform issues, stale position references, or animation timing problems. Investigate the popup positioning logic, car display coordinate tracking, and per-frame update order.","status":"closed","priority":2,"issue_type":"bug","owner":"markferree@gmail.com","created_at":"2026-02-04T18:04:47.350192405-08:00","created_by":"Mark Ferree","updated_at":"2026-02-05T19:13:27.612894457-08:00","closed_at":"2026-02-05T19:13:27.612894457-08:00","close_reason":"Closed"}
{"id":"agent-racer-lv1","title":"Disable exhaust smoke and wheel animation for parked cars","description":"Cars in the parking lot still show animated exhaust smoke and spinning wheels. Parked cars should appear fully stopped -- no exhaust particles, no wheel rotation. Only cars on the active track or in the pit with an open session should have these animations.","status":"closed","priority":2,"issue_type":"bug","owner":"markferree@gmail.com","created_at":"2026-02-04T17:55:37.722295466-08:00","created_by":"Mark Ferree","updated_at":"2026-02-04T18:00:09.096330158-08:00","closed_at":"2026-02-04T18:00:09.096330158-08:00","close_reason":"Disabled exhaust and wheel animations for parked cars"}
{"id":"agent-racer-lv8","title":"Backend tests: subagent JSONL parsing","description":"Add Go tests for progress entry parsing, subagent completion detection, mergeSubagents helper, incremental offset handling with progress entries. go test ./backend/internal/monitor/...","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-20T15:23:42.026830637-08:00","created_by":"Mark Ferree","updated_at":"2026-02-20T18:55:19.785822663-08:00","closed_at":"2026-02-20T18:55:19.785822663-08:00","close_reason":"Added subagent_test.go with 15 tests covering progress parsing, completion detection, incremental offset parsing, mergeSubagents, and classifySubagentActivity","dependencies":[{"issue_id":"agent-racer-lv8","depends_on_id":"agent-racer-1zl","type":"blocks","created_at":"2026-02-20T15:23:54.000157115-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-lvf","title":"Stats persistence layer (gamification/persistence.go)","description":"Implement stats.json read/write in XDG state dir (~/.local/state/agent-racer/). Schema: version, totalSessions, totalCompletions, totalErrors, consecutiveCompletions, sessionsPerSource map, sessionsPerModel map, distinctModelsUsed, distinctSourcesUsed, peak metrics (maxContextUtilization, maxBurnRate, maxConcurrentActive, maxToolCalls, maxMessages, maxSessionDurationSec), achievementsUnlocked map, battlePass struct, equipped struct, lastUpdated. Atomic writes (write temp then rename). Version field for future migrations. XDG_STATE_HOME resolution with fallback to ~/.local/state/. Files: backend/internal/gamification/persistence.go","status":"closed","priority":1,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-18T16:26:50.242661458-08:00","created_by":"Mark Ferree","updated_at":"2026-02-20T15:14:21.680683875-08:00","closed_at":"2026-02-20T15:14:21.680683875-08:00","close_reason":"Closed"}
{"id":"agent-racer-lwp","title":"Weekly challenge definitions","description":"Data-driven challenge specs: {id, description, condition, target, progress}. Initial hardcoded set of 5-10 challenges: Run 5 Haiku sessions, Complete 3 sessions without errors, Hit 90% context utilization twice, Use 3 different models in one day, Burn 1M total tokens this week. Challenge rotation: pick 3 per week from the pool. Progress tracking per challenge. Files: backend/internal/gamification/battlepass.go or challenges.go","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-18T16:36:47.928365731-08:00","created_by":"Mark Ferree","updated_at":"2026-02-23T19:53:20.316123998-08:00","closed_at":"2026-02-23T19:53:20.316123998-08:00","close_reason":"Closed","dependencies":[{"issue_id":"agent-racer-lwp","depends_on_id":"agent-racer-ykn","type":"blocks","created_at":"2026-02-18T16:36:51.953079487-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-m6x","title":"Phase 4+5: Racer Integration + Hit Testing + Flyout","description":"Integrate hamsters into Racer.js (Map, update/animate/draw), fan positioning behind car, zone behavior. Extend RaceCanvas hit testing for hamster bounding boxes, add hamster flyout and subagents section to parent flyout. See docs/SUBAGENT-PLAN.md Phases 4-5.","status":"closed","priority":1,"issue_type":"feature","owner":"markferree@gmail.com","created_at":"2026-02-20T15:23:39.262500823-08:00","created_by":"Mark Ferree","updated_at":"2026-02-20T18:59:49.658816684-08:00","closed_at":"2026-02-20T18:59:49.658816684-08:00","close_reason":"Phases 4-5 implemented: Racer.js hamster integration (sync, fan positioning, draw with zone dimming), RaceCanvas hit testing for hamsters, hamster flyout, parent subagents section","dependencies":[{"issue_id":"agent-racer-m6x","depends_on_id":"agent-racer-1zl","type":"blocks","created_at":"2026-02-20T15:23:52.687818137-08:00","created_by":"Mark Ferree"},{"issue_id":"agent-racer-m6x","depends_on_id":"agent-racer-evc","type":"blocks","created_at":"2026-02-20T15:23:53.140830985-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-mb8","title":"Frontend: Churning feedback - RaceCanvas.js + sounds","description":"Update RaceCanvas.js to play subtle engine idle sound on churning start. Detect churning state transitions for audio cues.","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-04T07:51:25.037554905-08:00","created_by":"Mark Ferree","updated_at":"2026-02-04T11:26:39.28381328-08:00","closed_at":"2026-02-04T11:26:39.28381328-08:00","close_reason":"Already implemented in earlier commits (9e7d83f, 49aeea8, e39b5ff)","dependencies":[{"issue_id":"agent-racer-mb8","depends_on_id":"agent-racer-bzb","type":"discovered-from","created_at":"2026-02-04T07:51:25.039308603-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-mhc","title":"Remove weird animation on bottom of racetrack","status":"closed","priority":3,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-01-31T16:04:17.606326927-08:00","created_by":"Mark Ferree","updated_at":"2026-02-02T09:52:39.08094973-08:00","closed_at":"2026-02-02T09:52:39.08094973-08:00","close_reason":"Removed crowd bobbing animation from bottom of racetrack"}
{"id":"agent-racer-mi3","title":"Achievement engine + definitions (gamification/achievements.go)","description":"Create AchievementEngine with full achievement registry (31 achievements across 6 categories: Session Milestones, Source Diversity, Model Collection, Performance \u0026 Endurance, Spectacle, Streaks). Each achievement: ID, Name, Description, Tier (bronze/silver/gold/platinum), Category, Condition func(Stats) bool. Evaluate(stats) returns newly unlocked achievements. Stores unlock timestamps in stats. See docs/GAMIFICATION-PLAN.md for full achievement table. Files: backend/internal/gamification/achievements.go","status":"closed","priority":1,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-18T16:27:52.744649566-08:00","created_by":"Mark Ferree","updated_at":"2026-02-20T15:51:10.286883616-08:00","closed_at":"2026-02-20T15:51:10.286883616-08:00","close_reason":"Closed","dependencies":[{"issue_id":"agent-racer-mi3","depends_on_id":"agent-racer-uke","type":"blocks","created_at":"2026-02-18T16:27:57.796224877-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-nlb","title":"Shorten working dir display in flyout","description":"Working Dir shows full path '/home/mrf/Projects/agent-racer' which is noisy. Show just the project directory name with the full path available on hover/tooltip.","status":"closed","priority":4,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-05T19:59:35.875990313-08:00","created_by":"Mark Ferree","updated_at":"2026-02-18T16:47:29.026420492-08:00","closed_at":"2026-02-18T16:47:29.026420492-08:00","close_reason":"Show basename of working dir with full path on hover tooltip"}
{"id":"agent-racer-nuz","title":"Frontend: Churning animations - Racer.js updates","description":"Implement churning animation in Racer.js: detect churning state changes, add wheel rotation, exhaust particles, engine vibration when churning but no active thinking/tool_use.","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-04T07:51:24.637740912-08:00","created_by":"Mark Ferree","updated_at":"2026-02-04T11:26:39.279952546-08:00","closed_at":"2026-02-04T11:26:39.279952546-08:00","close_reason":"Already implemented in earlier commits (9e7d83f, 49aeea8, e39b5ff)","dependencies":[{"issue_id":"agent-racer-nuz","depends_on_id":"agent-racer-bzb","type":"discovered-from","created_at":"2026-02-04T07:51:24.639448093-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-o1k","title":"Codex model does not show forward progress, stays at start line","description":"When using the Codex model, the car does not move forward on the track. The car remains at the starting position instead of progressing through the race.","status":"closed","priority":4,"issue_type":"bug","owner":"markferree@gmail.com","created_at":"2026-02-02T12:17:48.494059387-08:00","created_by":"Mark Ferree","updated_at":"2026-02-05T20:19:23.622378018-08:00","closed_at":"2026-02-05T20:19:23.622378018-08:00","close_reason":"Fixed: parseCodexTokenCount now handles nested info.total_token_usage format from real Codex CLI. Also added turn_context, function_call, custom_tool_call, and agent_reasoning event handling."}
{"id":"agent-racer-oba","title":"Add worktree context field (directory + branch) to beads issues","description":"Currently the flag shows only the last directory slug (e.g., 'fix-login' from '/path/to/agent-racer--fix-login').\n\nProposed enhancement:\n- **Metadata**: Store full worktree context (complete directory path + full branch name)\n- **Flag display**: Show short versions of both slug and branch\n\nExamples:\n\nCurrent flag: [fix-login]\nProposed flag: [fix-login | fix-login-timeout] or [fix-login:fix-login-timeout]\n\nMetadata would contain:\n- directory: '/home/user/projects/agent-racer--fix-login'\n- branch: 'fix-login-timeout'\n- (or combined worktree_context field)\n\nFlag extraction logic:\n- Directory slug: last component after '--' separator\n- Branch: current git branch name\n- Display: combine both in compact format for the flag\n\nBenefits:\n- Flag shows both context pieces at a glance\n- Metadata preserves full detail for programmatic use\n- Easy to distinguish between slug and branch when they differ\n- More informative than slug alone, especially when branch names add context\n\nThis gives you both the detailed metadata and a compact, informative flag display.","status":"closed","priority":2,"issue_type":"feature","owner":"markferree@gmail.com","created_at":"2026-02-07T15:31:28.723480726-08:00","created_by":"Mark Ferree","updated_at":"2026-02-13T08:55:43.846923515-08:00","closed_at":"2026-02-13T08:55:43.846923515-08:00","close_reason":"Already implemented and merged in 12cc278 (Add worktree context field to session state)"}
{"id":"agent-racer-ojl","title":"Test utility functions (formatTokens, formatElapsed, escapeHtml)","description":"Unit tests for pure utility functions across main.js, Dashboard.js, and Racer.js. Cover formatTokens thresholds, formatElapsed, escapeHtml, shortName/shortModel, hexToRgb/lightenHex. Extract shared formatters into utils.js if duplicated.","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-07T20:29:48.434752687-08:00","created_by":"Mark Ferree","updated_at":"2026-02-13T14:06:58.05173181-08:00","closed_at":"2026-02-13T14:06:58.05173181-08:00","close_reason":"Merged utility tests into Dashboard.test.js and Racer.test.js (unique tests combined)","dependencies":[{"issue_id":"agent-racer-ojl","depends_on_id":"agent-racer-dac","type":"blocks","created_at":"2026-02-07T20:30:17.504751613-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-p7g","title":"Allow sessions to transition from parking lot back to pit/track on resume","description":"Sessions that reach terminal state (complete/errored/lost) and land in the parking lot have no way to return to the pit or track if they get resumed. Both backend and frontend treat terminal states as final.\n\n**Backend changes needed:**\n- Monitor should detect new JSONL activity on a terminal session and reset it back to active state\n- Clear CompletedAt timestamp and cancel scheduled removal when activity resumes\n- Update Activity from terminal back to appropriate active state (Thinking/ToolUse/Idle)\n\n**Frontend changes needed:**\n- Add reverse animation waypoints: Parking Lot → pit entry column → Pit or Track\n- Update isParkingLotRacer() to yield when activity field changes from terminal to active\n- Reset parkingLotDim/parkingLotDimTarget back to 0 on resume\n- Restore normal opacity and saturation when car leaves parking lot\n\n**Lifecycle should become:**\nTrack ↔ Pit ↔ Parking Lot (bidirectional, not one-way)","status":"closed","priority":2,"issue_type":"feature","owner":"markferree@gmail.com","created_at":"2026-02-04T18:00:37.802411257-08:00","created_by":"Mark Ferree","updated_at":"2026-02-04T18:21:53.248284176-08:00","closed_at":"2026-02-04T18:21:53.248284176-08:00","close_reason":"Added bidirectional parking lot transitions - sessions can resume from terminal state"}
{"id":"agent-racer-pdi","title":"Consolidate frontend directories: The project currently has two 'frontend' directories: one at the root level and another at 'backend/internal/frontend/static'. This duplication can lead to confusion and potential inconsistencies. Consolidate these into a single, unified frontend directory to improve project clarity, maintainability, and reduce redundancy.","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-01T17:41:40.719458316-08:00","created_by":"Mark Ferree","updated_at":"2026-02-02T10:03:13.931691039-08:00","closed_at":"2026-02-02T10:03:13.931691039-08:00","close_reason":"Consolidated frontend directories. The root frontend/ is now the single source of truth. The backend/internal/frontend/static/ directory is now a build-time artifact (git-ignored) that gets created by 'make embed'."}
{"id":"agent-racer-pg3","title":"CI: run Vitest unit tests on push/PR","description":"Add GitHub Actions workflow to run frontend Vitest unit tests on push and PR. Install Node deps in frontend/, run vitest --run. Fail the build on test failures. Should run alongside existing Go tests if a CI workflow already exists, or create a new one.","status":"closed","priority":1,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-07T20:33:45.144869899-08:00","created_by":"Mark Ferree","updated_at":"2026-02-13T08:53:55.98708126-08:00","closed_at":"2026-02-13T08:53:55.98708126-08:00","close_reason":"Added vitest and e2e jobs to .github/workflows/ci.yml","dependencies":[{"issue_id":"agent-racer-pg3","depends_on_id":"agent-racer-dac","type":"blocks","created_at":"2026-02-07T20:33:52.1689333-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-phe","title":"Frontend: UnlockToast.js","description":"Canvas-rendered toast notification for achievement unlocks. Slides in from top-center, auto-dismisses after 5s. Tier-colored border (bronze=#cd7f32, silver=#c0c0c0, gold=#ffd700, platinum=#e5e4e2). Stacks if multiple unlock simultaneously. Plays existing completion chime SFX pitch-shifted by tier. Listens for 'achievement_unlocked' WS messages. Files: frontend/src/gamification/UnlockToast.js","status":"closed","priority":1,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-18T16:33:04.257556054-08:00","created_by":"Mark Ferree","updated_at":"2026-02-23T19:16:46.544171247-08:00","closed_at":"2026-02-23T19:16:46.544171247-08:00","close_reason":"Closed","dependencies":[{"issue_id":"agent-racer-phe","depends_on_id":"agent-racer-gzl","type":"blocks","created_at":"2026-02-18T16:33:07.640585798-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-pk3","title":"Frontend: CosmeticRegistry.js","description":"Maps reward IDs to render parameters. Exports: getEquippedPaint(id) -\u003e {fill, stroke, pattern}, getEquippedTrail(id) -\u003e particle config, getEquippedBody(id) -\u003e polygon vertices, getEquippedBadge(id) -\u003e emoji/sprite. Consumed by Racer.js, Particles.js, Dashboard.js. Hydrates from backend equipped state on page load. Files: frontend/src/gamification/CosmeticRegistry.js","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-18T16:34:39.720391565-08:00","created_by":"Mark Ferree","updated_at":"2026-02-22T13:14:31.205429751-08:00","closed_at":"2026-02-22T13:14:31.205429751-08:00","close_reason":"Merged to main","dependencies":[{"issue_id":"agent-racer-pk3","depends_on_id":"agent-racer-07y","type":"blocks","created_at":"2026-02-18T16:34:43.382849012-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-pra","title":"Test session Store CRUD operations","description":"session/store.go has 0% coverage on all methods (NewStore, Get, GetAll, Update, Remove, ActiveCount). These are simple but critical — the Store is the source of truth for all session state. Add unit tests for basic CRUD, concurrent access safety, and ActiveCount accuracy after adds/removes/terminal transitions.","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-05T20:30:01.55214847-08:00","created_by":"Mark Ferree","updated_at":"2026-02-07T12:42:22.242420922-08:00","closed_at":"2026-02-07T12:42:22.242420922-08:00","close_reason":"Added 16 unit tests for Store CRUD: NewStore, Get, GetAll, Update, Remove, ActiveCount with copy-safety, lane assignment, concurrent access"}
{"id":"agent-racer-q8u","title":"Tests: stats tracking + persistence","description":"Persistence tests: round-trip Load/Save, missing file returns defaults, atomic write survives crash, version field present. StatsTracker tests: counters increment for new sessions/completions/errors, streak resets on error, peak metrics update correctly (only increase), debounced save with mock clock or short interval. Files: backend/internal/gamification/stats_test.go, backend/internal/gamification/persistence_test.go","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-18T16:27:14.675206885-08:00","created_by":"Mark Ferree","updated_at":"2026-02-20T15:55:56.812948685-08:00","closed_at":"2026-02-20T15:55:56.812948685-08:00","close_reason":"Closed","dependencies":[{"issue_id":"agent-racer-q8u","depends_on_id":"agent-racer-uke","type":"blocks","created_at":"2026-02-18T16:27:18.359466772-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-qb4","title":"Crowd noise rarely triggers with multiple active agents","description":"Crowd noise audio seems to rarely pick up even when 3-4 agents are actively running. The sound thresholds or triggers for crowd noise need another tuning pass to make the audio feel responsive to the level of activity on the track.","status":"closed","priority":3,"issue_type":"bug","owner":"markferree@gmail.com","created_at":"2026-02-04T17:18:05.234448114-08:00","created_by":"Mark Ferree","updated_at":"2026-02-04T17:28:27.775795932-08:00","closed_at":"2026-02-04T17:28:27.775795932-08:00","close_reason":"Tuned crowd noise thresholds for better responsiveness"}
{"id":"agent-racer-r60","title":"Truncate long session ID in flyout with copy button","description":"Session ID like 'claude:8ef9db78-7058-4366-95b1-e2bd3cb8916d' wraps awkwardly in the detail flyout. Truncate to first 12 chars with a copy-to-clipboard button for the full value.","status":"closed","priority":3,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-05T19:59:31.32746232-08:00","created_by":"Mark Ferree","updated_at":"2026-02-18T16:47:28.508790645-08:00","closed_at":"2026-02-18T16:47:28.508790645-08:00","close_reason":"Truncated session ID to 12 chars with copy-to-clipboard button"}
{"id":"agent-racer-r9g","title":"Add parking lot area for closed sessions","description":"Add a 'parking lot' area below the pit for sessions whose tmux window has closed (terminal sessions: complete/errored/lost). This creates a clear visual hierarchy: Track (active) → Pit (idle with open window) → Parking Lot (closed). See docs/parking-lot.md for full implementation plan.","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-02-04T14:49:14.010312-08:00","created_by":"mark.ferree","updated_at":"2026-02-04T17:34:33.30846639-08:00","closed_at":"2026-02-04T17:34:33.30846639-08:00","close_reason":"Added parking lot area for closed sessions"}
{"id":"agent-racer-rgq","title":"Move crowd above track and add realistic animated spectators","description":"The crowd is currently rendered below the track -- move it above the track instead. Replace the current crowd rendering with realistic-looking spectators that have animation tied to their cheering state. When crowd noise is active, spectators should visibly cheer (arms up, bouncing, etc). When quiet, they should be in a neutral idle pose. The animation state should sync with the crowd noise audio triggers.","status":"closed","priority":2,"issue_type":"feature","owner":"markferree@gmail.com","created_at":"2026-02-04T17:34:27.254938032-08:00","created_by":"Mark Ferree","updated_at":"2026-02-04T17:44:11.435267132-08:00","closed_at":"2026-02-04T17:44:11.435267132-08:00","close_reason":"Moved crowd above track with animated spectators synced to cheering state"}
{"id":"agent-racer-rjs","title":"Test Particles color interpolation, decay, and size curves","description":"Unit tests for canvas/Particles.js. Cover _hslToRgb correctness, _lerpColor at t=0/0.5/1, lifespan decay, _getSizeMultiplier curves, gravity application. All pure math.","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-07T20:29:55.6016114-08:00","created_by":"Mark Ferree","updated_at":"2026-02-13T14:06:54.691969487-08:00","closed_at":"2026-02-13T14:06:54.691969487-08:00","close_reason":"Merged Particles.test.js (199 lines, 31 tests)","dependencies":[{"issue_id":"agent-racer-rjs","depends_on_id":"agent-racer-dac","type":"blocks","created_at":"2026-02-07T20:30:19.122167469-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-s2w","title":"REST endpoint: GET /api/achievements","description":"Return full achievement list with unlock status per achievement. Used by frontend AchievementPanel to hydrate on page load. Response: array of {id, name, description, tier, category, unlocked: bool, unlockedAt: timestamp|null, reward: {type, id, name}}.","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-18T16:33:21.387227727-08:00","created_by":"Mark Ferree","updated_at":"2026-02-20T19:15:29.594394443-08:00","closed_at":"2026-02-20T19:15:29.594394443-08:00","close_reason":"Endpoint shipped as part of AchievementPanel work (agent-racer-sxa). Handler at server.go:179, route at /api/achievements.","dependencies":[{"issue_id":"agent-racer-s2w","depends_on_id":"agent-racer-mi3","type":"blocks","created_at":"2026-02-18T16:33:24.329461783-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-sda","title":"Phase 6: Port bloom/shake/flash to PixiJS filters","description":"Replace custom bloom pass with BlurFilter on glow container. Screen shake via container transforms. Flash via overlay Graphics alpha. Connection overlay to DOM. See docs/pixi-migration.md Phase 6.","notes":"Phase 8 integration complete! The real PixiJS Application now exists with WebGL rendering. Phase 6 can now be attempted. Previous WebGL context loss was caused by missing Application - this should be resolved.","status":"tombstone","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-07T14:14:49.862504487-08:00","created_by":"Mark Ferree","updated_at":"2026-02-07T20:23:27.286967736-08:00","dependencies":[{"issue_id":"agent-racer-sda","depends_on_id":"agent-racer-eju","type":"blocks","created_at":"2026-02-07T14:14:59.446773519-08:00","created_by":"Mark Ferree"}],"deleted_at":"2026-02-07T20:23:27.286967736-08:00","deleted_by":"batch delete","delete_reason":"batch delete","original_type":"task"}
{"id":"agent-racer-sob","title":"Test SoundEngine excitement calculation and frequency hashing","description":"Unit tests for audio/SoundEngine.js pure logic. Cover excitement tieredScore, hash-based frequency stability, pitch multipliers by activity, mute/unmute state. Mock AudioContext.","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-07T20:30:05.736552699-08:00","created_by":"Mark Ferree","updated_at":"2026-02-13T14:06:55.557080544-08:00","closed_at":"2026-02-13T14:06:55.557080544-08:00","close_reason":"Merged SoundEngine.test.js (494 lines, 34 tests)","dependencies":[{"issue_id":"agent-racer-sob","depends_on_id":"agent-racer-dac","type":"blocks","created_at":"2026-02-07T20:30:20.321709274-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-swn","title":"Churning indicator confusing when session is idle","description":"Flyout shows Process: CHURNING while Activity: IDLE. The yellow warning triangle on the car is cryptic. Consider renaming to 'CPU Active', adding a tooltip, or only showing when it contradicts the session state (e.g. idle but CPU hot).","status":"closed","priority":3,"issue_type":"bug","owner":"markferree@gmail.com","created_at":"2026-02-05T19:59:33.376165671-08:00","created_by":"Mark Ferree","updated_at":"2026-02-05T20:11:16.806625165-08:00","closed_at":"2026-02-05T20:11:16.806625165-08:00","close_reason":"Renamed churning to CPU Active in flyout, warning triangle now only shows when churning contradicts session activity"}
{"id":"agent-racer-sxa","title":"Frontend: AchievementPanel.js","description":"Semi-transparent canvas overlay toggled with 'A' key. Grid layout by category (6 categories: Session Milestones, Source Diversity, Model Collection, Performance \u0026 Endurance, Spectacle, Streaks). Each tile: icon, name, tier badge. Bright if unlocked, dimmed+padlock if locked. Hover tooltip with full description + unlock condition. Footer: X/Y achievements counter. Close with X button or A key. Hydrates from GET /api/achievements on page load. Files: frontend/src/gamification/AchievementPanel.js, frontend/src/main.js","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-18T16:33:13.548585928-08:00","created_by":"Mark Ferree","updated_at":"2026-02-20T19:11:49.037095643-08:00","closed_at":"2026-02-20T19:11:49.037095643-08:00","close_reason":"Closed","dependencies":[{"issue_id":"agent-racer-sxa","depends_on_id":"agent-racer-mi3","type":"blocks","created_at":"2026-02-18T16:33:16.902004681-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-tiph","title":"Bug: Phantom filter blocks all real subagent hamsters","description":"## Problem\nHamsters never appear in real mode. The phantom filter in jsonl.go:286 rejects ALL progress entries because Claude Code always emits toolUseID == parentToolUseID for every progress entry — including real Task tool subagents.\n\n## Root Cause\nThe filter `if entry.ParentToolUseID != \"\" \u0026\u0026 entry.ToolUseID == entry.ParentToolUseID { return }` was added to reject \"phantom\" nested tool calls, but the premise was wrong: Claude Code has NEVER emitted progress entries where toolUseID differs from parentToolUseID. Analysis of 75+ JSONL files across the entire project history confirms diff_ids=0 in every single file.\n\n## What the data looks like\n- Self-progress entries: slug matches session slug (e.g., \"elegant-noodling-thunder\"), toolUseID == parentToolUseID\n- Real subagent entries: slug differs from session slug (e.g., \"swift-curious-hamster\"), toolUseID == parentToolUseID  \n- Both have the same toolUseID == parentToolUseID pattern — cannot use that field to distinguish them\n\n## Why this is tricky\nSimply removing the phantom filter reintroduces the original phantom bug (TestPhantomProgressEntriesFiltered). Need to understand:\n1. What actually causes phantom subagents? Is it self-progress entries? Nested tool calls?\n2. Are the existing phantom test cases realistic given the actual JSONL format?\n3. What distinguishes a real Task tool subagent from a self-progress entry?\n\n## Investigation needed\n- Dump a real JSONL from a session that spawned Task tool subagents to see the actual entry format\n- Compare toolUseID patterns between self-progress and Task tool progress entries\n- Check if there's a field other than slug that reliably distinguishes them\n- Verify the phantom test fixtures match reality\n\n## Files\n- backend/internal/monitor/jsonl.go:284-288 (phantom filter)\n- backend/internal/monitor/jsonl.go:290-296 (slug filter)  \n- backend/internal/monitor/subagent_test.go:778-804 (phantom test)","status":"closed","priority":1,"issue_type":"bug","owner":"markferree@gmail.com","created_at":"2026-02-23T09:48:55.784391296-08:00","created_by":"Mark Ferree","updated_at":"2026-02-23T10:07:44.548450831-08:00","closed_at":"2026-02-23T10:07:44.548450831-08:00","close_reason":"Fixed: replaced phantom filter with slug-based self-progress detection. All monitor tests pass."}
{"id":"agent-racer-tpf","title":"Consolidate frontend directories: The project currently has two 'frontend' directories: one at the root level and another at 'backend/internal/frontend/static'. This duplication can lead to confusion and potential inconsistencies. Consolidate these into a single, unified frontend directory to improve project clarity, maintainability, and reduce redundancy.","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-01T17:43:05.43079103-08:00","created_by":"Mark Ferree","updated_at":"2026-02-02T09:43:05.237396076-08:00","closed_at":"2026-02-02T09:43:05.237396076-08:00","close_reason":"Duplicate of agent-racer-pdi"}
{"id":"agent-racer-twm","title":"CI: Add Makefile targets and GitHub Actions","description":"Implement the CI plan from docs/CI-PLAN.md. Add Make targets (test-frontend, test-e2e, lint, ci) and a GitHub Actions workflow for push/PR. Document 'make ci' in README.","status":"closed","priority":3,"issue_type":"feature","owner":"markferree@gmail.com","created_at":"2026-02-20T19:31:02.490423101-08:00","created_by":"Mark Ferree","updated_at":"2026-02-23T19:29:47.877230932-08:00","closed_at":"2026-02-23T19:29:47.877230932-08:00","close_reason":"Closed"}
{"id":"agent-racer-u57","title":"Zombie sessions: closed/inactive sessions still showing up, especially Sonnet","description":"Closed or inactive sessions are not being removed from the display and continue to show as 'zombie' sessions. This happens mainly with Sonnet model sessions. Sessions should be cleaned up once they're closed or inactive.","status":"closed","priority":2,"issue_type":"bug","owner":"markferree@gmail.com","created_at":"2026-02-02T12:48:41.000375915-08:00","created_by":"Mark Ferree","updated_at":"2026-02-04T11:34:10.983591911-08:00","closed_at":"2026-02-04T11:34:10.983591911-08:00","close_reason":"Fixed two bugs causing zombie sessions: (1) Added removedKeys set to prevent re-creation of terminal sessions whose JSONL files are still within the 10-min discover window, (2) Added transcript path fallback in handleSessionEnd so session end markers match correctly even when session_id differs from the filename-based ID"}
{"id":"agent-racer-ugg","title":"Codex model shows 'unknown' instead of model name","description":"When Codex is selected as the current model, the car label displays 'unknown' instead of showing the actual model name 'Codex'.","status":"closed","priority":4,"issue_type":"bug","owner":"markferree@gmail.com","created_at":"2026-02-02T12:16:53.28395048-08:00","created_by":"Mark Ferree","updated_at":"2026-02-05T19:13:27.646899989-08:00","closed_at":"2026-02-05T19:13:27.646899989-08:00","close_reason":"Closed"}
{"id":"agent-racer-uke","title":"StatsTracker: hook into monitor loop","description":"Create StatsTracker that subscribes to session state changes from monitor. On each session change: increment counters (totalSessions, totalCompletions, totalErrors), update sessionsPerSource/sessionsPerModel maps, update peak metrics, track consecutive completion streaks. Debounced save: call persistence every 30s and on graceful shutdown. Needs callback/channel from monitor loop for state transitions. Files: backend/internal/gamification/stats.go, backend/internal/monitor/monitor.go","status":"closed","priority":1,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-18T16:26:58.506162286-08:00","created_by":"Mark Ferree","updated_at":"2026-02-20T15:26:54.27922873-08:00","closed_at":"2026-02-20T15:26:54.27922873-08:00","close_reason":"Closed","dependencies":[{"issue_id":"agent-racer-uke","depends_on_id":"agent-racer-lvf","type":"blocks","created_at":"2026-02-18T16:27:02.328733129-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-v0r","title":"Crowd sprites consume fixed space on small viewports","description":"The spectator crowd along the top of the track is a nice aesthetic but takes a fixed height regardless of viewport size. On smaller screens this wastes space that could show data. Consider making crowd height responsive or hideable.","status":"closed","priority":4,"issue_type":"feature","owner":"markferree@gmail.com","created_at":"2026-02-05T19:59:46.011405453-08:00","created_by":"Mark Ferree","updated_at":"2026-02-18T16:53:02.770363568-08:00","closed_at":"2026-02-18T16:53:02.770363568-08:00","close_reason":"Made crowd responsive: full crowd at \u003e=500px viewport, compact (single row) at 350-500px, hidden at \u003c350px"}
{"id":"agent-racer-wa6m","title":"Security: Auth is optional by default","description":"server.go:315-317 — if auth_token is empty in config, all endpoints are publicly accessible including sessions, PIDs, working dirs, and tmux targets. Consider: generating a random token on first run if none configured, or logging a prominent warning at startup that auth is disabled.","status":"closed","priority":3,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-23T09:37:27.665838671-08:00","created_by":"Mark Ferree","updated_at":"2026-02-23T19:17:10.223039759-08:00","closed_at":"2026-02-23T19:17:10.223039759-08:00","close_reason":"Closed"}
{"id":"agent-racer-wtc","title":"Research Codex (ChatGPT CLI) session/log storage","description":"Identify Codex CLI local log/history paths, schema (tokens/model/tool usage), session identifiers, and working dir mapping. Document in docs/multiagent-sources.md.","status":"closed","priority":1,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-01-31T16:46:04.925376514-08:00","created_by":"Mark Ferree","updated_at":"2026-02-01T12:00:28.156456275-08:00","closed_at":"2026-02-01T12:00:28.156456275-08:00","close_reason":"Research complete, documented in docs/codex-source-research.md"}
{"id":"agent-racer-wz2","title":"Implement Codex source ingestion","description":"Add CodexSource implementation (Discover/Parse/Metadata). Requires research results from agent-racer-wtc and interface from agent-racer-3mu. Add fixtures/tests.","notes":"Modularity: implement Codex source as plug-in to shared Source interface; avoid duplicating monitor/state logic.","status":"closed","priority":1,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-01-31T16:46:59.04483925-08:00","created_by":"Mark Ferree","updated_at":"2026-02-01T16:12:07.89227037-08:00","closed_at":"2026-02-01T16:12:07.89227037-08:00","close_reason":"Implemented CodexSource with new envelope and old bare format parsing, session discovery via ~/.codex/sessions/, token count extraction.","dependencies":[{"issue_id":"agent-racer-wz2","depends_on_id":"agent-racer-wtc","type":"blocks","created_at":"2026-01-31T16:50:50.426410608-08:00","created_by":"Mark Ferree"},{"issue_id":"agent-racer-wz2","depends_on_id":"agent-racer-3mu","type":"blocks","created_at":"2026-01-31T16:51:03.197187582-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-x8z","title":"Dynamic crowd noise tied to race excitement level","description":"Crowd/ambient noise should be reactive to what's happening on screen, not just on/off. Volume and intensity should scale with an 'excitement' heuristic based on: number of actively moving sessions (thinking/tool_use), sessions near the finish line (\u003e80% context), recent completions or crashes, and concurrent activity (multiple sessions racing at once). When nothing interesting is happening (all idle/waiting, single slow session), crowd noise should fade to silence or a very low murmur. When multiple sessions are active, approaching the finish, or crashing, the crowd should roar. Smooth transitions between levels — no abrupt volume jumps.","status":"closed","priority":3,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-01-31T16:05:35.632187699-08:00","created_by":"Mark Ferree","updated_at":"2026-02-02T10:07:01.185669718-08:00","closed_at":"2026-02-02T10:07:01.185669718-08:00","close_reason":"Implemented dynamic crowd noise that scales with race excitement. Crowd volume smoothly transitions based on active sessions, proximity to finish line, and recent events."}
{"id":"agent-racer-xoqi","title":"Security: Sanitize error messages in HTTP responses","description":"server.go:306-309 returns fmt.Sprintf with %%v errors directly to clients, leaking internal paths and implementation details. Log full errors server-side, return generic messages to clients (e.g., 'operation failed' instead of 'tmux focus failed: /proc/123/stat: no such file').","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-23T09:37:10.446962697-08:00","created_by":"Mark Ferree","updated_at":"2026-02-23T17:49:15.453498709-08:00","closed_at":"2026-02-23T17:49:15.453498709-08:00","close_reason":"Closed"}
{"id":"agent-racer-xth","title":"Test RaceCanvas zone partitioning and hit testing","description":"Unit tests for canvas/RaceCanvas.js. Cover racer zone assignment (isPitRacer/isParkingLotRacer by activity + freshness), hit testing (45px radius), canvas resize bounds for different racer counts. Mock requestAnimationFrame and canvas context.","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-07T20:30:03.571142268-08:00","created_by":"Mark Ferree","updated_at":"2026-02-13T14:06:56.375719445-08:00","closed_at":"2026-02-13T14:06:56.375719445-08:00","close_reason":"Merged RaceCanvas.test.js (622 lines, 46 tests)","dependencies":[{"issue_id":"agent-racer-xth","depends_on_id":"agent-racer-dac","type":"blocks","created_at":"2026-02-07T20:30:19.922956036-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-xxr","title":"Implement process activity detection for churning state","description":"Add CPU and network monitoring to detect when Claude processes are actively working but haven't produced output yet. This will make cars animate ('churn') before tokens appear in the JSONL logs.\n\n## Design Doc\nSee docs/process-activity-detection.md\n\n## Implementation Tasks\n1. Add process_darwin.go - macOS process discovery via ps/lsof\n2. Add IsChurning field to SessionState\n3. Integrate process polling into monitor loop\n4. Add frontend churning animations (wheel spin, exhaust, vibration)\n5. Add configuration options for thresholds\n6. Add unit tests\n\n## Acceptance Criteria\n- Cars show subtle animation when Claude is processing but no output yet\n- Works on macOS (Linux support can be follow-up)\n- Polling overhead is reasonable (\u003c100ms per cycle)","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-02-02T16:35:37.373892-08:00","created_by":"mark.ferree","updated_at":"2026-02-02T17:09:50.95888315-08:00","closed_at":"2026-02-02T17:09:50.95888315-08:00","close_reason":"Implemented process activity detection for churning state"}
{"id":"agent-racer-y6t9","title":"Security: Add WebSocket connection limits","description":"broadcast.go:79-100 has no max concurrent WebSocket connections. Each client gets a 64-byte buffered channel. A malicious actor could open thousands of connections causing memory exhaustion. Add a MaxConnections cap (e.g., 1000) and reject new connections with a close message when full.","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-23T09:37:03.308987199-08:00","created_by":"Mark Ferree","updated_at":"2026-02-23T17:20:01.219835255-08:00","closed_at":"2026-02-23T17:20:01.219835255-08:00","close_reason":"Closed"}
{"id":"agent-racer-ykn","title":"BattlePass engine: XP + tiers (gamification/battlepass.go)","description":"Create BattlePass engine. XP award rules: Session observed=10, Session completes=25, 50% context=15, 90% context=30, New model first time=50, New source first time=100, Achievement unlocked=50-200 by tier, Weekly challenge=150. 10 tiers per season ~1000 XP each. Tier advancement logic, current tier + progress calculation. Persisted in stats.json battlePass field. AwardXP(amount, reason), GetProgress() -\u003e {tier, xp, pct, rewards}. Files: backend/internal/gamification/battlepass.go","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-18T16:36:38.27524859-08:00","created_by":"Mark Ferree","updated_at":"2026-02-23T19:31:31.375243204-08:00","closed_at":"2026-02-23T19:31:31.375243204-08:00","close_reason":"Closed","dependencies":[{"issue_id":"agent-racer-ykn","depends_on_id":"agent-racer-uke","type":"blocks","created_at":"2026-02-18T16:36:42.328845905-08:00","created_by":"Mark Ferree"}]}
{"id":"agent-racer-z6c","title":"Test WebSocket reconnection and message dispatch","description":"Unit tests for websocket.js RaceConnection. Cover exponential backoff (1s to 30s cap), message parsing, malformed JSON handling, onStatus callbacks. Mock WebSocket constructor.","status":"closed","priority":2,"issue_type":"task","owner":"markferree@gmail.com","created_at":"2026-02-07T20:29:50.309240524-08:00","created_by":"Mark Ferree","updated_at":"2026-02-13T14:06:55.965688122-08:00","closed_at":"2026-02-13T14:06:55.965688122-08:00","close_reason":"Merged websocket.test.js (326 lines, 20 tests)","dependencies":[{"issue_id":"agent-racer-z6c","depends_on_id":"agent-racer-dac","type":"blocks","created_at":"2026-02-07T20:30:17.90684972-08:00","created_by":"Mark Ferree"}]}
{"id": "agent-racer-b4l", "title": "Animated pixel-art character mode (alternative to cars)", "description": "Inspired by pixel-agents (VS Code extension that renders AI agents as animated pixel characters in a virtual office), add an alternative visualization mode where sessions are represented as animated pixel-art characters instead of cars.\n\n## Core concept\nToggle between \"race mode\" (current cars on track) and \"office mode\" (pixel characters working at desks in a virtual office). The mode switch should be a keyboard shortcut (O for office) and a UI toggle.\n\n## Character state machine\nMap existing Activity states to character animations:\n- **Thinking** → character typing at desk with thought bubble\n- **Tool use** → character reading/searching (flipping through papers animation)\n- **Waiting** → character standing, speech bubble with \"...\" or clock icon\n- **Idle** → character sleeping at desk (Z particles)\n- **Churning** → character pacing back and forth\n- **Complete** → character stands up, stretches, victory pose\n- **Errored** → character falls off chair, dizzy stars\n- **Lost** → character fades/walks offscreen\n\n## Rendering\n- 16x16 pixel art sprites at 2-3x scale (32x32 or 48x48 rendered)\n- 6+ character variants (mapped to model: Opus=wizard, Sonnet=knight, Haiku=rogue, Codex=engineer, Gemini=scientist)\n- Sprite sheet with idle, walk, sit, type, read, sleep, victory, error frame sequences\n- Canvas 2D rendering with integer zoom for pixel-perfect display\n\n## Office layout\n- Grid-based office floor (auto-arranged, no editor initially)\n- Desk per active session, arranged in rows\n- Characters walk between desks using BFS pathfinding on walkable tiles\n- Subagent hamsters become tiny companion creatures following parent character\n\n## Data flow\n- Reuse existing WebSocket state (snapshot/delta) — no backend changes needed\n- New OfficeCanvas.js renders the alternative view, consuming same session state\n- CosmeticRegistry extended with character skins alongside car paints\n\n## Files\n- frontend/src/canvas/OfficeCanvas.js (new) — office renderer\n- frontend/src/entities/Character.js (new) — pixel character entity + state machine\n- frontend/src/entities/Pathfinding.js (new) — BFS grid pathfinding\n- frontend/src/canvas/OfficeLayout.js (new) — auto desk placement\n- frontend/src/main.js — add mode toggle, keyboard shortcut O\n- frontend/src/gamification/CosmeticRegistry.js — add character skin definitions", "status": "open", "priority": 4, "issue_type": "feature", "created_at": "2026-02-26T07:43:39.855619-08:00", "created_by": "Claude", "updated_at": "2026-02-26T07:43:39.855619-08:00"}
{"id": "agent-racer-qdd", "title": "Speech bubbles and thought clouds above racers", "description": "Inspired by pixel-agents' speech bubbles that show when agents await input or need permission, add comic-style speech/thought bubbles above cars.\n\n## Bubble types\n1. **Thought cloud** (thinking activity): Classic cloud bubble with dots, shows abbreviated current thought like \"Planning...\" or \"Analyzing code...\"\n2. **Tool bubble** (tool_use activity): Wrench icon + tool name in a rounded rectangle (\"Bash\", \"Read\", \"Edit\", \"Grep\")\n3. **Wait bubble** (waiting activity): Speech bubble with \"...\" and a pulsing clock icon — indicates waiting for user input\n4. **Error bubble** (errored activity): Jagged explosion bubble with \"\\!\" or brief error hint\n5. **Complete bubble** (complete activity): Star/sparkle bubble with checkmark, fades after 3s\n\n## Rendering\n- Bubbles float above the car with a small tail/pointer\n- Smooth fade-in/fade-out transitions (200ms)\n- Auto-dismiss after configurable duration (default 4s for tool, 8s for thought)\n- Queue system: if multiple bubbles trigger rapidly, show latest only\n- Scale with canvas zoom, maintain readable minimum size\n- Text truncated with ellipsis at 20 chars\n\n## Keyboard shortcut\n- B key toggles bubbles on/off (default: on)\n- Config option: sound.enable_bubbles (default: true)\n\n## Files\n- frontend/src/entities/Racer.js — add bubble rendering in draw(), bubble state management\n- frontend/src/main.js — add B keyboard shortcut, bubble toggle state", "status": "open", "priority": 3, "issue_type": "feature", "created_at": "2026-02-26T07:43:39.855619-08:00", "created_by": "Claude", "updated_at": "2026-02-26T07:43:39.855619-08:00"}
{"id": "agent-racer-xie", "title": "Dynamic weather system tied to aggregate session activity", "description": "Add a dynamic weather system where the visual environment changes based on aggregate session metrics, creating an ambient atmosphere that reflects the \"mood\" of the coding activity.\n\n## Weather states\n| Condition | Weather | Visual |\n|-----------|---------|--------|\n| No sessions | Night, clear | Dark sky, stars twinkling |\n| 1-2 sessions, low activity | Sunny | Bright track, lens flare, light particles |\n| 3+ sessions, heavy tool use | Overcast | Grey gradient sky, wind particles |\n| Many errors across sessions | Thunderstorm | Dark sky, lightning flashes, rain particles |\n| High burn rate (>5K tokens/min aggregate) | Heat haze | Shimmer effect on track surface, mirage distortion |\n| All sessions complete | Golden hour | Warm orange gradient, celebration atmosphere |\n| Context compactions happening | Fog | Reduced visibility, misty particles, eerie glow |\n\n## Particle layers\n- Rain: diagonal falling particles with splash on track surface\n- Snow: gentle floating particles with drift (triggered by long idle periods)\n- Lightning: full-screen flash + fork sprite (random interval during storm)\n- Wind: horizontal streak particles behind cars\n- Stars: twinkling point lights in background layer\n\n## Implementation\n- WeatherEngine.js: evaluates aggregate session stats every 2s, transitions between states\n- Weather transitions smoothly (2s cross-fade between states)\n- Track.js receives weather state and adjusts: sky gradient, surface color/reflections, ambient particles\n- Particles.js extended with weather-specific presets (rain, snow, lightning, wind)\n- SoundEngine.js: weather-specific ambient (rain patter, thunder rumble, wind howl)\n\n## Config\n\n\n## Files\n- frontend/src/canvas/WeatherEngine.js (new)\n- frontend/src/canvas/Track.js — sky/surface weather rendering\n- frontend/src/canvas/Particles.js — weather particle presets\n- frontend/src/audio/SoundEngine.js — weather ambient sounds\n- frontend/src/main.js — W key toggles weather on/off\n\n## Config\n```yaml\nweather:\n  enabled: true\n  transition_speed: 2s\n  lightning_volume: 0.6\n```\n\n## Files\n- frontend/src/canvas/WeatherEngine.js (new)\n- frontend/src/canvas/Track.js — sky/surface weather rendering\n- frontend/src/canvas/Particles.js — weather particle presets\n- frontend/src/audio/SoundEngine.js — weather ambient sounds\n- frontend/src/main.js — W key toggles weather on/off", "status": "open", "priority": 3, "issue_type": "feature", "created_at": "2026-02-26T07:43:39.855619-08:00", "created_by": "Claude", "updated_at": "2026-02-26T07:43:39.855619-08:00"}
{"id": "agent-racer-dbt", "title": "Track layout editor with tile-based grid", "description": "Inspired by pixel-agents' built-in office layout editor (tile placement, undo/redo, export/import JSON), add a track layout editor so users can design custom race circuits.\n\n## Editor UI\n- Toggle editor mode with E key or toolbar button\n- Left panel: tile palette (straight, curve-left, curve-right, chicane, pit-entry, pit-exit, grandstand, tree, barrier, start-line, finish-line)\n- Canvas becomes interactive grid: click to place tiles, right-click to erase\n- Drag to paint multiple tiles\n- Tile auto-connect: adjacent straights merge visually, curves connect smoothly\n\n## Grid system\n- Configurable grid size (default 32x16, expandable up to 64x64 like pixel-agents)\n- Each cell is 16x16 base pixels, rendered at track scale\n- Track path auto-validates: must form a closed loop from start to finish\n- Validation overlay: green outline for valid track, red for disconnected segments\n\n## Editor features (matching pixel-agents complexity)\n- **Undo/redo**: 50 levels, Ctrl+Z / Ctrl+Shift+Z\n- **Export/import**: Download/upload track as JSON file\n- **Preset tracks**: 3 built-in layouts (oval, figure-8, F1-style circuit)\n- **Tile rotation**: R key rotates selected tile 90°\n- **Grid snap**: All placements snap to grid\n- **Preview mode**: P key to preview cars racing on custom layout\n\n## Track rendering\n- Cars follow the track path using waypoint interpolation (not just linear X position)\n- Position still maps to context utilization, but now follows the circuit shape\n- Curves have visual banking (car tilts slightly)\n- Multiple laps possible for long sessions (1 lap = 0-100% context)\n\n## Persistence\n- Saved to ~/.local/share/agent-racer/tracks/ as JSON files\n- Active track selection in config.yaml: track.active = \"my-circuit\"\n- Shared across browser sessions (persisted via REST endpoint)\n\n## Files\n- frontend/src/editor/TrackEditor.js (new) — editor UI + interactions\n- frontend/src/editor/TilePalette.js (new) — tile selection panel\n- frontend/src/editor/TrackValidator.js (new) — path connectivity validation\n- frontend/src/canvas/Track.js — render custom layouts, waypoint system\n- frontend/src/entities/Racer.js — follow curved path, banking\n- backend/internal/tracks/ (new) — track storage + REST endpoints\n- config.yaml — track.active setting", "status": "open", "priority": 4, "issue_type": "feature", "created_at": "2026-02-26T07:43:39.855619-08:00", "created_by": "Claude", "updated_at": "2026-02-26T07:43:39.855619-08:00"}
{"id": "agent-racer-aac", "title": "Pit crew animations for idle/waiting sessions", "description": "When a car enters the pit lane (idle/waiting activity), spawn animated pit crew characters that \"work on\" the car. This brings life to the pit area and mirrors pixel-agents' office worker animations.\n\n## Pit crew mechanics\n- 2-4 tiny pixel art crew members appear when car enters pit\n- Crew \"runs\" to car position using simple pathfinding\n- Animation states:\n  - **Running to car**: Crew sprints to car position\n  - **Working**: Characters alternate between wrench animation, tire change, fuel fill\n  - **Standing back**: When car is about to leave pit, crew steps away\n  - **Celebrating**: If car completes from pit, crew does a small cheer\n\n## Crew visuals\n- 8x8 pixel sprites at 2x scale (16x16 rendered)\n- Color-coded to match car model color (purple crew for Opus, etc.)\n- Tool props: wrench, tire, fuel can (rendered as simple pixel shapes)\n- Simple 4-frame walk cycle, 3-frame work cycle\n\n## Timing\n- Crew spawns 500ms after car enters pit (don't animate for brief pit stops)\n- Crew despawns with a \"run away\" animation when car leaves pit\n- If car stays in pit >30s, crew gets \"bored\" animation (leaning, checking watch)\n\n## Implementation\n- PitCrew.js entity class with its own sprite rendering and animation state machine\n- Managed by RaceCanvas.js: one PitCrew instance per pit-lane car\n- Crew positions offset around car (front, rear, sides)\n- Does NOT require backend changes — purely frontend visual\n\n## Files\n- frontend/src/entities/PitCrew.js (new) — crew entity + animations\n- frontend/src/canvas/RaceCanvas.js — spawn/despawn crew with pit transitions", "status": "open", "priority": 3, "issue_type": "feature", "created_at": "2026-02-26T07:43:39.855619-08:00", "created_by": "Claude", "updated_at": "2026-02-26T07:43:39.855619-08:00"}
{"id": "agent-racer-kws", "title": "Session replay system with timeline scrubber", "description": "Record session race histories and allow replay with a timeline scrubber. Like pixel-agents persists office layouts, this persists the entire race experience for review.\n\n## Recording\n- Backend records timestamped snapshots to a replay file during the race\n- Each snapshot includes: all session states, positions, activities, token counts\n- Snapshots stored at 1-second resolution (compressed — only deltas after first frame)\n- Replay files saved to ~/.local/state/agent-racer/replays/YYYY-MM-DD_HH-MM.jsonl\n- Auto-cleanup: keep last 7 days of replays (configurable)\n\n## Replay UI\n- R key opens replay mode (pauses live view)\n- Bottom bar: timeline scrubber with play/pause, 1x/2x/4x speed, step forward/back\n- Mini timeline shows activity heatmap (colored segments for thinking/tool_use/waiting)\n- Session labels appear/disappear as they join/leave the race\n- Full particle effects and animations replay at current playback speed\n\n## REST API\n- GET /api/replays — list available replay files\n- GET /api/replays/:id — stream replay data\n- Backend serves replay data, frontend handles playback rendering\n\n## Implementation\n- Backend: ReplayRecorder writes snapshots to JSONL file\n- Frontend: ReplayPlayer.js manages playback state, feeds recorded snapshots to RaceCanvas\n- RaceCanvas accepts either live WebSocket data or replay data (same interface)\n\n## Files\n- backend/internal/replay/recorder.go (new) — snapshot recording\n- backend/internal/replay/api.go (new) — REST endpoints\n- frontend/src/replay/ReplayPlayer.js (new) — playback engine\n- frontend/src/replay/TimelineScrubber.js (new) — scrubber UI\n- frontend/src/canvas/RaceCanvas.js — accept replay data source", "status": "open", "priority": 3, "issue_type": "feature", "created_at": "2026-02-26T07:43:39.855619-08:00", "created_by": "Claude", "updated_at": "2026-02-26T07:43:39.855619-08:00"}
{"id": "agent-racer-lm0", "title": "Drafting and overtake mechanics with proximity detection", "description": "Add racing-inspired drafting (slipstream) and overtake mechanics when cars are close to each other on the track, creating emergent visual drama.\n\n## Drafting (slipstream)\n- When a car is within 5% context utilization of another car ahead, it enters \"draft zone\"\n- Visual: speed lines between drafter and leader, air distortion effect behind leader\n- Drafter car's exhaust particles get boosted (larger, faster, more turbulent)\n- Subtle camera shake on the drafting car\n- Speed differential shown as a small delta indicator (e.g., \"+1.2K tok/min\")\n\n## Overtake detection\n- When a car passes another (contextUtilization crosses over), trigger overtake event\n- Visual: flash effect on overtaking car, swoosh particle burst, brief zoom emphasis\n- Sound: whoosh SFX with doppler-like pitch shift\n- Leaderboard updates with position change arrows (↑↓)\n- If the same car gets overtaken back within 10s, show \"battle\" indicator between them\n\n## Position tracking\n- Calculate ordinal positions (1st, 2nd, 3rd...) based on contextUtilization\n- Position badges on cars (small number overlay)\n- Position change events sent via WebSocket delta (new field: position, positionDelta)\n\n## Backend\n- Monitor calculates positions in poll loop and includes in SessionState\n- New fields: Position int, PositionDelta int (delta since last snapshot)\n- Overtake events emitted as a new WebSocket message type\n\n## Frontend\n- DraftDetector.js: proximity math, draft/overtake event emission\n- Racer.js: draft visual effects, position badge rendering\n- Particles.js: new overtake swoosh preset\n- SoundEngine.js: whoosh SFX for overtakes\n- Dashboard.js: position column with change arrows\n\n## Files\n- backend/internal/session/state.go — Position, PositionDelta fields\n- backend/internal/monitor/monitor.go — position calculation in poll loop\n- backend/internal/ws/protocol.go — OvertakeEvent message type\n- frontend/src/canvas/DraftDetector.js (new) — proximity + overtake logic\n- frontend/src/entities/Racer.js — draft visuals, position badge\n- frontend/src/canvas/Particles.js — overtake swoosh preset\n- frontend/src/audio/SoundEngine.js — overtake SFX\n- frontend/src/canvas/Dashboard.js — position column", "status": "open", "priority": 3, "issue_type": "feature", "created_at": "2026-02-26T07:43:39.855619-08:00", "created_by": "Claude", "updated_at": "2026-02-26T07:43:39.855619-08:00"}
{"id": "agent-racer-khr", "title": "Team garages — group sessions by project with shared livery", "description": "Inspired by pixel-agents' grouping of characters in office spaces, group sessions by working directory into \"teams\" with shared garage areas, team colors, and aggregate stats.\n\n## Team concept\n- Sessions sharing the same working directory (project root) form a team\n- Each team gets a visual \"garage\" area on the track (colored team banner)\n- Team livery: shared stripe color overlaid on individual car paint\n- Aggregate team stats: total tokens, session count, completion rate\n\n## Garage rendering\n- Garage banners at the bottom of the track, one per team\n- Banner shows: team name (project directory basename), car count, total tokens\n- Active team cars have a subtle team-color glow\n- Garage area acts as \"home base\" — cars animate returning to garage on completion\n\n## Team leaderboard\n- New tab in Dashboard: \"Teams\" alongside existing session leaderboard\n- Columns: team name, members, total tokens, avg burn rate, completions, errors\n- Sortable by any column\n- Team color dot indicator\n\n## Auto-detection\n- Backend groups sessions by workingDir basename (configurable: full path or basename)\n- Single-session teams shown as \"solo\" with no garage\n- Config: minimum 2 sessions to form a team (configurable)\n\n## Files\n- backend/internal/session/teams.go (new) — team grouping logic\n- backend/internal/ws/protocol.go — team info in snapshot/delta payloads\n- frontend/src/canvas/TeamGarage.js (new) — garage rendering\n- frontend/src/canvas/Dashboard.js — team leaderboard tab\n- frontend/src/entities/Racer.js — team livery stripe overlay", "status": "open", "priority": 3, "issue_type": "feature", "created_at": "2026-02-26T07:43:39.855619-08:00", "created_by": "Claude", "updated_at": "2026-02-26T07:43:39.855619-08:00"}
{"id": "agent-racer-p1j", "title": "Spectator commentary system with auto-generated race narration", "description": "Add an auto-generated spectator commentary that narrates the race in real-time, displayed as a scrolling ticker or speech bubbles from a commentator character.\n\n## Commentary triggers\n| Event | Example commentary |\n|-------|-------------------|\n| Session starts | \"A new challenger enters the race\\! opus-refactor takes lane 3.\" |\n| Overtake | \"What a move\\! sonnet-tests passes opus-debug on the inside\\!\" |\n| 50% context | \"opus-refactor crosses the halfway mark — burning tokens at 3.2K/min\\!\" |\n| 90% context | \"sonnet-feature is in the danger zone\\! Only 10% context remaining\\!\" |\n| Error | \"Disaster\\! opus-debug spins out with an error\\!\" |\n| Completion | \"CHECKERED FLAG\\! sonnet-tests crosses the line first\\!\" |\n| Long idle | \"opus-review has been in the pit for 5 minutes... is the driver asleep?\" |\n| High burn rate | \"sonnet-tests is ON FIRE\\! 8K tokens per minute\\!\" |\n| Compaction | \"opus-refactor pits for a compaction — fresh context\\!\" |\n| Subagent spawn | \"opus-refactor deploys a hamster\\! Subagent joining the action\\!\" |\n\n## Display modes\n1. **Ticker**: Scrolling text bar at bottom of screen (like sports broadcast)\n2. **Announcer**: Pixel art commentator character in corner with speech bubble\n3. **Off**: Disable commentary\n\n## Commentary engine\n- Template-based with randomized variations per event type\n- Cooldown between messages (5s minimum, configurable)\n- Priority queue: overtakes and completions trump idle observations\n- Session names substituted into templates\n- Optional TTS using Web Speech API (experimental)\n\n## Files\n- frontend/src/commentary/CommentaryEngine.js (new) — event-to-text mapping, queue, cooldown\n- frontend/src/commentary/templates.js (new) — commentary template strings\n- frontend/src/commentary/Ticker.js (new) — scrolling ticker renderer\n- frontend/src/commentary/Announcer.js (new) — commentator character sprite\n- frontend/src/main.js — C key cycles commentary modes (ticker → announcer → off)\n- frontend/src/audio/SoundEngine.js — optional TTS integration", "status": "open", "priority": 2, "issue_type": "feature", "created_at": "2026-02-26T07:43:39.855619-08:00", "created_by": "Claude", "updated_at": "2026-02-26T07:43:39.855619-08:00"}
{"id": "agent-racer-vei", "title": "Car damage model and visual wear from errors and compactions", "description": "Add cumulative visual damage to cars based on session events — errors cause dents and scratches, compactions cause panel discoloration, high burn rates cause heat stress marks. Analogous to pixel-agents showing character fatigue states.\n\n## Damage types\n| Event | Damage visual | Accumulation |\n|-------|--------------|--------------|\n| Error (errored activity) | Dent + scratch marks on body | +30% damage per error |\n| Compaction | Panel discoloration, \"repainted\" patch | +15% per compaction |\n| High burn rate (>5K/min sustained 60s) | Heat marks (red glow on hood) | Gradual while sustained |\n| Tool failure (tool_use → errored quickly) | Spark shower from affected area | +10% per failure |\n| Context >95% | Overheating visual (steam from radiator) | Persistent while >95% |\n\n## Damage rendering\n- Damage accumulates as a 0-100% value per car\n- 0-25%: Minor — small scratch overlay (2-3 thin lines)\n- 25-50%: Moderate — dent deformation on body polygon, smoke wisps\n- 50-75%: Heavy — multiple dents, cracked windshield overlay, sparking\n- 75-100%: Critical — body panels visually loose, heavy smoke, warning lights\n\n## Repair mechanic\n- Cars \"heal\" during idle/pit time (1% per second in pit)\n- Completion resets damage to 0 with a \"repair\" particle animation\n- Cosmetic \"armor\" body type reduces visible damage (gamification reward)\n\n## Implementation\n- damage field added to Racer state (0.0 - 1.0)\n- Damage overlays rendered as additional canvas operations on car body\n- Scratch, dent, crack textures as procedural canvas drawing (not sprite sheets)\n- Steam/smoke particles from Particles.js existing presets\n\n## Files\n- frontend/src/entities/Racer.js — damage state, damage overlay rendering, repair during pit\n- frontend/src/canvas/Particles.js — steam, sparking presets\n- frontend/src/canvas/RaceCanvas.js — pass damage-inducing events to racers\n- backend/internal/session/state.go — optional DamageLevel field (or computed frontend-only)", "status": "open", "priority": 2, "issue_type": "feature", "created_at": "2026-02-26T07:43:39.855619-08:00", "created_by": "Claude", "updated_at": "2026-02-26T07:43:39.855619-08:00"}
{"id": "agent-racer-q5j", "title": "Mini-map radar overlay showing all car positions", "description": "Add a mini-map radar in the corner showing all cars as dots on a compressed track view, inspired by pixel-agents' expandable office grid overview. Essential when many sessions are racing and the main view is scrolled.\n\n## Mini-map rendering\n- Fixed position: bottom-right corner, 200x60px (configurable)\n- Semi-transparent dark background with track outline\n- Each car is a colored dot (model color), size proportional to token count\n- Current viewport shown as a white rectangle (when scrolled)\n- Clicking on a dot scrolls the main view to that car\n\n## Dot states\n- Solid dot: active (thinking, tool_use)\n- Pulsing dot: waiting/idle\n- Blinking dot: errored\n- Star icon: completed\n- Dot trail: shows recent movement direction\n\n## Interaction\n- Hover over mini-map: enlarge to 2x for detail\n- Click dot: scroll main view + open detail flyout for that session\n- N key toggles mini-map visibility\n\n## Implementation\n- Minimap.js: self-contained canvas overlay, reads session positions from RaceCanvas\n- Positioned with CSS fixed, does not interfere with main canvas\n- Renders at lower resolution for performance (no particles, no labels, just dots)\n- Updates at 10fps (independent of main 60fps loop)\n\n## Files\n- frontend/src/ui/Minimap.js (new) — mini-map renderer + interaction\n- frontend/src/canvas/RaceCanvas.js — expose session positions for minimap\n- frontend/src/main.js — N key toggle, minimap initialization\n- frontend/styles.css — minimap overlay positioning", "status": "open", "priority": 2, "issue_type": "feature", "created_at": "2026-02-26T07:43:39.855619-08:00", "created_by": "Claude", "updated_at": "2026-02-26T07:43:39.855619-08:00"}
{"id": "agent-racer-v8q", "title": "Audience/grandstand with reactive crowd based on race excitement", "description": "Add an animated grandstand/audience section to the track that reacts to race events — cheering during overtakes, gasping during errors, doing the wave during completions. Mirrors pixel-agents' concept of an inhabited environment that feels alive.\n\n## Crowd rendering\n- Grandstand rendered above the track as rows of tiny spectator sprites (4x6px each)\n- 3-4 rows of 20-40 spectators (scales with track width)\n- Base animation: subtle idle sway (1-2px oscillation)\n- Crowd members have randomized colors (shirt colors from a palette)\n\n## Crowd reactions\n| Event | Crowd behavior |\n|-------|---------------|\n| Car passes 50% | Small cheer — nearby spectators jump briefly |\n| Overtake | Section cheer — wave of jumping spreads outward from overtake point |\n| Car completes | Full standing ovation — all spectators jump + confetti from stands |\n| Car errors | Gasp — spectators lean forward, hands up |\n| High excitement (3+ active) | Mexican wave — sequential jumping across grandstand |\n| Idle (no activity 30s) | Spectators start sitting down, checking phones |\n| New car enters | Small section waves flags |\n\n## Excitement metric\n- Aggregate excitement = f(active sessions, recent overtakes, burn rates, completions)\n- 0-25: Calm crowd, mostly seated\n- 25-50: Engaged, occasional reactions\n- 50-75: Excited, frequent waves\n- 75-100: Frenzy, constant animation, flags waving\n\n## Sound integration\n- Crowd ambient volume tied to excitement level (already have ambient audio)\n- Cheer SFX on high-excitement events\n- Mapped to existing SoundEngine.js excitement system\n\n## Files\n- frontend/src/entities/Grandstand.js (new) — grandstand renderer, crowd animation, reaction system\n- frontend/src/canvas/Track.js — allocate space for grandstand above track\n- frontend/src/canvas/RaceCanvas.js — feed events to grandstand, manage excitement\n- frontend/src/audio/SoundEngine.js — crowd cheer SFX mappings", "status": "open", "priority": 2, "issue_type": "feature", "created_at": "2026-02-26T07:43:39.855619-08:00", "created_by": "Claude", "updated_at": "2026-02-26T07:43:39.855619-08:00"}
